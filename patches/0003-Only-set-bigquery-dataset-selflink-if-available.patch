From 4baf5b1f56a6bafa64ea914e7fd31908c1975299 Mon Sep 17 00:00:00 2001
From: Daniel Bradley <daniel@pulumi.com>
Date: Tue, 7 Mar 2023 11:55:24 +0000
Subject: [PATCH 3/9] Only set bigquery dataset selflink if available

---
 .../services/bigquery/resource_bigquery_dataset.go       | 9 +++++++--
 1 file changed, 7 insertions(+), 2 deletions(-)

diff --git a/google-beta/services/bigquery/resource_bigquery_dataset.go b/google-beta/services/bigquery/resource_bigquery_dataset.go
index 96cf5c7b6..7086541bd 100644
--- a/google-beta/services/bigquery/resource_bigquery_dataset.go
+++ b/google-beta/services/bigquery/resource_bigquery_dataset.go
@@ -654,8 +654,13 @@ func resourceBigQueryDatasetRead(d *schema.ResourceData, meta interface{}) error
 	if err := d.Set("storage_billing_model", flattenBigQueryDatasetStorageBillingModel(res["storageBillingModel"], d, config)); err != nil {
 		return fmt.Errorf("Error reading Dataset: %s", err)
 	}
-	if err := d.Set("self_link", tpgresource.ConvertSelfLinkToV1(res["selfLink"].(string))); err != nil {
-		return fmt.Errorf("Error reading Dataset: %s", err)
+	if res["selfLink"] != nil {
+		if err := d.Set("self_link", tpgresource.ConvertSelfLinkToV1(res["selfLink"].(string))); err != nil {
+			return fmt.Errorf("Error reading Dataset: %s", err)
+		}
+	} else {
+		// we don't have a self_link so we set an empty string
+		d.Set("self_link", "")
 	}
 
 	return nil
-- 
2.39.2 (Apple Git-143)

