# coding=utf-8
# *** WARNING: this file was generated by pulumi-language-python. ***
# *** Do not edit by hand unless you're certain you know what you are doing! ***

import builtins as _builtins
import warnings
import sys
import pulumi
import pulumi.runtime
from typing import Any, Mapping, Optional, Sequence, Union, overload
if sys.version_info >= (3, 11):
    from typing import NotRequired, TypedDict, TypeAlias
else:
    from typing_extensions import NotRequired, TypedDict, TypeAlias
from .. import _utilities
from . import outputs
from ._inputs import *

__all__ = ['ProjectSinkArgs', 'ProjectSink']

@pulumi.input_type
class ProjectSinkArgs:
    def __init__(__self__, *,
                 destination: pulumi.Input[_builtins.str],
                 bigquery_options: Optional[pulumi.Input['ProjectSinkBigqueryOptionsArgs']] = None,
                 custom_writer_identity: Optional[pulumi.Input[_builtins.str]] = None,
                 description: Optional[pulumi.Input[_builtins.str]] = None,
                 disabled: Optional[pulumi.Input[_builtins.bool]] = None,
                 exclusions: Optional[pulumi.Input[Sequence[pulumi.Input['ProjectSinkExclusionArgs']]]] = None,
                 filter: Optional[pulumi.Input[_builtins.str]] = None,
                 name: Optional[pulumi.Input[_builtins.str]] = None,
                 project: Optional[pulumi.Input[_builtins.str]] = None,
                 unique_writer_identity: Optional[pulumi.Input[_builtins.bool]] = None):
        """
        The set of arguments for constructing a ProjectSink resource.

        :param pulumi.Input[_builtins.str] destination: The destination of the sink (or, in other words, where logs are written to). Can be a Cloud Storage bucket, a PubSub topic, a BigQuery dataset, a Cloud Logging bucket, or a Google Cloud project. Examples:
               
               - `storage.googleapis.com/[GCS_BUCKET]`
               - `bigquery.googleapis.com/projects/[PROJECT_ID]/datasets/[DATASET]`
               - `pubsub.googleapis.com/projects/[PROJECT_ID]/topics/[TOPIC_ID]`
               - `logging.googleapis.com/projects/[PROJECT_ID]/locations/global/buckets/[BUCKET_ID]`
               - `logging.googleapis.com/projects/[PROJECT_ID]`
               
               The writer associated with the sink must have access to write to the above resource.
        :param pulumi.Input['ProjectSinkBigqueryOptionsArgs'] bigquery_options: Options that affect sinks exporting data to BigQuery. Structure documented below.
        :param pulumi.Input[_builtins.str] custom_writer_identity: A user managed service account that will be used to write
               the log entries. The format must be `serviceAccount:some@email`. This field can only be specified if you are
               routing logs to a destination outside this sink's project. If not specified, a Logging service account
               will automatically be generated.
        :param pulumi.Input[_builtins.str] description: A description of this sink. The maximum length of the description is 8000 characters.
        :param pulumi.Input[_builtins.bool] disabled: If set to True, then this sink is disabled and it does not export any log entries.
        :param pulumi.Input[Sequence[pulumi.Input['ProjectSinkExclusionArgs']]] exclusions: Log entries that match any of the exclusion filters will not be exported. If a log entry is matched by both `filter` and one of `exclusions.filter`, it will not be exported.  Can be repeated multiple times for multiple exclusions. Structure is documented below.
        :param pulumi.Input[_builtins.str] filter: The filter to apply when exporting logs. Only log entries that match the filter are exported.
               See [Advanced Log Filters](https://cloud.google.com/logging/docs/view/advanced_filters) for information on how to
               write a filter.
        :param pulumi.Input[_builtins.str] name: The name of the logging sink. Logging automatically creates two sinks: `_Required` and `_Default`.
        :param pulumi.Input[_builtins.str] project: The ID of the project to create the sink in. If omitted, the project associated with the provider is
               used.
        :param pulumi.Input[_builtins.bool] unique_writer_identity: Whether or not to create a unique identity associated with this sink. If `false`, then the `writer_identity` used is `serviceAccount:cloud-logs@system.gserviceaccount.com`. If `true` (the default),
               then a unique service account is created and used for this sink. If you wish to publish logs across projects or utilize
               `bigquery_options`, you must set `unique_writer_identity` to true.
        """
        pulumi.set(__self__, "destination", destination)
        if bigquery_options is not None:
            pulumi.set(__self__, "bigquery_options", bigquery_options)
        if custom_writer_identity is not None:
            pulumi.set(__self__, "custom_writer_identity", custom_writer_identity)
        if description is not None:
            pulumi.set(__self__, "description", description)
        if disabled is not None:
            pulumi.set(__self__, "disabled", disabled)
        if exclusions is not None:
            pulumi.set(__self__, "exclusions", exclusions)
        if filter is not None:
            pulumi.set(__self__, "filter", filter)
        if name is not None:
            pulumi.set(__self__, "name", name)
        if project is not None:
            pulumi.set(__self__, "project", project)
        if unique_writer_identity is not None:
            pulumi.set(__self__, "unique_writer_identity", unique_writer_identity)

    @_builtins.property
    @pulumi.getter
    def destination(self) -> pulumi.Input[_builtins.str]:
        """
        The destination of the sink (or, in other words, where logs are written to). Can be a Cloud Storage bucket, a PubSub topic, a BigQuery dataset, a Cloud Logging bucket, or a Google Cloud project. Examples:

        - `storage.googleapis.com/[GCS_BUCKET]`
        - `bigquery.googleapis.com/projects/[PROJECT_ID]/datasets/[DATASET]`
        - `pubsub.googleapis.com/projects/[PROJECT_ID]/topics/[TOPIC_ID]`
        - `logging.googleapis.com/projects/[PROJECT_ID]/locations/global/buckets/[BUCKET_ID]`
        - `logging.googleapis.com/projects/[PROJECT_ID]`

        The writer associated with the sink must have access to write to the above resource.
        """
        return pulumi.get(self, "destination")

    @destination.setter
    def destination(self, value: pulumi.Input[_builtins.str]):
        pulumi.set(self, "destination", value)

    @_builtins.property
    @pulumi.getter(name="bigqueryOptions")
    def bigquery_options(self) -> Optional[pulumi.Input['ProjectSinkBigqueryOptionsArgs']]:
        """
        Options that affect sinks exporting data to BigQuery. Structure documented below.
        """
        return pulumi.get(self, "bigquery_options")

    @bigquery_options.setter
    def bigquery_options(self, value: Optional[pulumi.Input['ProjectSinkBigqueryOptionsArgs']]):
        pulumi.set(self, "bigquery_options", value)

    @_builtins.property
    @pulumi.getter(name="customWriterIdentity")
    def custom_writer_identity(self) -> Optional[pulumi.Input[_builtins.str]]:
        """
        A user managed service account that will be used to write
        the log entries. The format must be `serviceAccount:some@email`. This field can only be specified if you are
        routing logs to a destination outside this sink's project. If not specified, a Logging service account
        will automatically be generated.
        """
        return pulumi.get(self, "custom_writer_identity")

    @custom_writer_identity.setter
    def custom_writer_identity(self, value: Optional[pulumi.Input[_builtins.str]]):
        pulumi.set(self, "custom_writer_identity", value)

    @_builtins.property
    @pulumi.getter
    def description(self) -> Optional[pulumi.Input[_builtins.str]]:
        """
        A description of this sink. The maximum length of the description is 8000 characters.
        """
        return pulumi.get(self, "description")

    @description.setter
    def description(self, value: Optional[pulumi.Input[_builtins.str]]):
        pulumi.set(self, "description", value)

    @_builtins.property
    @pulumi.getter
    def disabled(self) -> Optional[pulumi.Input[_builtins.bool]]:
        """
        If set to True, then this sink is disabled and it does not export any log entries.
        """
        return pulumi.get(self, "disabled")

    @disabled.setter
    def disabled(self, value: Optional[pulumi.Input[_builtins.bool]]):
        pulumi.set(self, "disabled", value)

    @_builtins.property
    @pulumi.getter
    def exclusions(self) -> Optional[pulumi.Input[Sequence[pulumi.Input['ProjectSinkExclusionArgs']]]]:
        """
        Log entries that match any of the exclusion filters will not be exported. If a log entry is matched by both `filter` and one of `exclusions.filter`, it will not be exported.  Can be repeated multiple times for multiple exclusions. Structure is documented below.
        """
        return pulumi.get(self, "exclusions")

    @exclusions.setter
    def exclusions(self, value: Optional[pulumi.Input[Sequence[pulumi.Input['ProjectSinkExclusionArgs']]]]):
        pulumi.set(self, "exclusions", value)

    @_builtins.property
    @pulumi.getter
    def filter(self) -> Optional[pulumi.Input[_builtins.str]]:
        """
        The filter to apply when exporting logs. Only log entries that match the filter are exported.
        See [Advanced Log Filters](https://cloud.google.com/logging/docs/view/advanced_filters) for information on how to
        write a filter.
        """
        return pulumi.get(self, "filter")

    @filter.setter
    def filter(self, value: Optional[pulumi.Input[_builtins.str]]):
        pulumi.set(self, "filter", value)

    @_builtins.property
    @pulumi.getter
    def name(self) -> Optional[pulumi.Input[_builtins.str]]:
        """
        The name of the logging sink. Logging automatically creates two sinks: `_Required` and `_Default`.
        """
        return pulumi.get(self, "name")

    @name.setter
    def name(self, value: Optional[pulumi.Input[_builtins.str]]):
        pulumi.set(self, "name", value)

    @_builtins.property
    @pulumi.getter
    def project(self) -> Optional[pulumi.Input[_builtins.str]]:
        """
        The ID of the project to create the sink in. If omitted, the project associated with the provider is
        used.
        """
        return pulumi.get(self, "project")

    @project.setter
    def project(self, value: Optional[pulumi.Input[_builtins.str]]):
        pulumi.set(self, "project", value)

    @_builtins.property
    @pulumi.getter(name="uniqueWriterIdentity")
    def unique_writer_identity(self) -> Optional[pulumi.Input[_builtins.bool]]:
        """
        Whether or not to create a unique identity associated with this sink. If `false`, then the `writer_identity` used is `serviceAccount:cloud-logs@system.gserviceaccount.com`. If `true` (the default),
        then a unique service account is created and used for this sink. If you wish to publish logs across projects or utilize
        `bigquery_options`, you must set `unique_writer_identity` to true.
        """
        return pulumi.get(self, "unique_writer_identity")

    @unique_writer_identity.setter
    def unique_writer_identity(self, value: Optional[pulumi.Input[_builtins.bool]]):
        pulumi.set(self, "unique_writer_identity", value)


@pulumi.input_type
class _ProjectSinkState:
    def __init__(__self__, *,
                 bigquery_options: Optional[pulumi.Input['ProjectSinkBigqueryOptionsArgs']] = None,
                 custom_writer_identity: Optional[pulumi.Input[_builtins.str]] = None,
                 description: Optional[pulumi.Input[_builtins.str]] = None,
                 destination: Optional[pulumi.Input[_builtins.str]] = None,
                 disabled: Optional[pulumi.Input[_builtins.bool]] = None,
                 exclusions: Optional[pulumi.Input[Sequence[pulumi.Input['ProjectSinkExclusionArgs']]]] = None,
                 filter: Optional[pulumi.Input[_builtins.str]] = None,
                 name: Optional[pulumi.Input[_builtins.str]] = None,
                 project: Optional[pulumi.Input[_builtins.str]] = None,
                 unique_writer_identity: Optional[pulumi.Input[_builtins.bool]] = None,
                 writer_identity: Optional[pulumi.Input[_builtins.str]] = None):
        """
        Input properties used for looking up and filtering ProjectSink resources.

        :param pulumi.Input['ProjectSinkBigqueryOptionsArgs'] bigquery_options: Options that affect sinks exporting data to BigQuery. Structure documented below.
        :param pulumi.Input[_builtins.str] custom_writer_identity: A user managed service account that will be used to write
               the log entries. The format must be `serviceAccount:some@email`. This field can only be specified if you are
               routing logs to a destination outside this sink's project. If not specified, a Logging service account
               will automatically be generated.
        :param pulumi.Input[_builtins.str] description: A description of this sink. The maximum length of the description is 8000 characters.
        :param pulumi.Input[_builtins.str] destination: The destination of the sink (or, in other words, where logs are written to). Can be a Cloud Storage bucket, a PubSub topic, a BigQuery dataset, a Cloud Logging bucket, or a Google Cloud project. Examples:
               
               - `storage.googleapis.com/[GCS_BUCKET]`
               - `bigquery.googleapis.com/projects/[PROJECT_ID]/datasets/[DATASET]`
               - `pubsub.googleapis.com/projects/[PROJECT_ID]/topics/[TOPIC_ID]`
               - `logging.googleapis.com/projects/[PROJECT_ID]/locations/global/buckets/[BUCKET_ID]`
               - `logging.googleapis.com/projects/[PROJECT_ID]`
               
               The writer associated with the sink must have access to write to the above resource.
        :param pulumi.Input[_builtins.bool] disabled: If set to True, then this sink is disabled and it does not export any log entries.
        :param pulumi.Input[Sequence[pulumi.Input['ProjectSinkExclusionArgs']]] exclusions: Log entries that match any of the exclusion filters will not be exported. If a log entry is matched by both `filter` and one of `exclusions.filter`, it will not be exported.  Can be repeated multiple times for multiple exclusions. Structure is documented below.
        :param pulumi.Input[_builtins.str] filter: The filter to apply when exporting logs. Only log entries that match the filter are exported.
               See [Advanced Log Filters](https://cloud.google.com/logging/docs/view/advanced_filters) for information on how to
               write a filter.
        :param pulumi.Input[_builtins.str] name: The name of the logging sink. Logging automatically creates two sinks: `_Required` and `_Default`.
        :param pulumi.Input[_builtins.str] project: The ID of the project to create the sink in. If omitted, the project associated with the provider is
               used.
        :param pulumi.Input[_builtins.bool] unique_writer_identity: Whether or not to create a unique identity associated with this sink. If `false`, then the `writer_identity` used is `serviceAccount:cloud-logs@system.gserviceaccount.com`. If `true` (the default),
               then a unique service account is created and used for this sink. If you wish to publish logs across projects or utilize
               `bigquery_options`, you must set `unique_writer_identity` to true.
        :param pulumi.Input[_builtins.str] writer_identity: The identity associated with this sink. This identity must be granted write access to the
               configured `destination`.
        """
        if bigquery_options is not None:
            pulumi.set(__self__, "bigquery_options", bigquery_options)
        if custom_writer_identity is not None:
            pulumi.set(__self__, "custom_writer_identity", custom_writer_identity)
        if description is not None:
            pulumi.set(__self__, "description", description)
        if destination is not None:
            pulumi.set(__self__, "destination", destination)
        if disabled is not None:
            pulumi.set(__self__, "disabled", disabled)
        if exclusions is not None:
            pulumi.set(__self__, "exclusions", exclusions)
        if filter is not None:
            pulumi.set(__self__, "filter", filter)
        if name is not None:
            pulumi.set(__self__, "name", name)
        if project is not None:
            pulumi.set(__self__, "project", project)
        if unique_writer_identity is not None:
            pulumi.set(__self__, "unique_writer_identity", unique_writer_identity)
        if writer_identity is not None:
            pulumi.set(__self__, "writer_identity", writer_identity)

    @_builtins.property
    @pulumi.getter(name="bigqueryOptions")
    def bigquery_options(self) -> Optional[pulumi.Input['ProjectSinkBigqueryOptionsArgs']]:
        """
        Options that affect sinks exporting data to BigQuery. Structure documented below.
        """
        return pulumi.get(self, "bigquery_options")

    @bigquery_options.setter
    def bigquery_options(self, value: Optional[pulumi.Input['ProjectSinkBigqueryOptionsArgs']]):
        pulumi.set(self, "bigquery_options", value)

    @_builtins.property
    @pulumi.getter(name="customWriterIdentity")
    def custom_writer_identity(self) -> Optional[pulumi.Input[_builtins.str]]:
        """
        A user managed service account that will be used to write
        the log entries. The format must be `serviceAccount:some@email`. This field can only be specified if you are
        routing logs to a destination outside this sink's project. If not specified, a Logging service account
        will automatically be generated.
        """
        return pulumi.get(self, "custom_writer_identity")

    @custom_writer_identity.setter
    def custom_writer_identity(self, value: Optional[pulumi.Input[_builtins.str]]):
        pulumi.set(self, "custom_writer_identity", value)

    @_builtins.property
    @pulumi.getter
    def description(self) -> Optional[pulumi.Input[_builtins.str]]:
        """
        A description of this sink. The maximum length of the description is 8000 characters.
        """
        return pulumi.get(self, "description")

    @description.setter
    def description(self, value: Optional[pulumi.Input[_builtins.str]]):
        pulumi.set(self, "description", value)

    @_builtins.property
    @pulumi.getter
    def destination(self) -> Optional[pulumi.Input[_builtins.str]]:
        """
        The destination of the sink (or, in other words, where logs are written to). Can be a Cloud Storage bucket, a PubSub topic, a BigQuery dataset, a Cloud Logging bucket, or a Google Cloud project. Examples:

        - `storage.googleapis.com/[GCS_BUCKET]`
        - `bigquery.googleapis.com/projects/[PROJECT_ID]/datasets/[DATASET]`
        - `pubsub.googleapis.com/projects/[PROJECT_ID]/topics/[TOPIC_ID]`
        - `logging.googleapis.com/projects/[PROJECT_ID]/locations/global/buckets/[BUCKET_ID]`
        - `logging.googleapis.com/projects/[PROJECT_ID]`

        The writer associated with the sink must have access to write to the above resource.
        """
        return pulumi.get(self, "destination")

    @destination.setter
    def destination(self, value: Optional[pulumi.Input[_builtins.str]]):
        pulumi.set(self, "destination", value)

    @_builtins.property
    @pulumi.getter
    def disabled(self) -> Optional[pulumi.Input[_builtins.bool]]:
        """
        If set to True, then this sink is disabled and it does not export any log entries.
        """
        return pulumi.get(self, "disabled")

    @disabled.setter
    def disabled(self, value: Optional[pulumi.Input[_builtins.bool]]):
        pulumi.set(self, "disabled", value)

    @_builtins.property
    @pulumi.getter
    def exclusions(self) -> Optional[pulumi.Input[Sequence[pulumi.Input['ProjectSinkExclusionArgs']]]]:
        """
        Log entries that match any of the exclusion filters will not be exported. If a log entry is matched by both `filter` and one of `exclusions.filter`, it will not be exported.  Can be repeated multiple times for multiple exclusions. Structure is documented below.
        """
        return pulumi.get(self, "exclusions")

    @exclusions.setter
    def exclusions(self, value: Optional[pulumi.Input[Sequence[pulumi.Input['ProjectSinkExclusionArgs']]]]):
        pulumi.set(self, "exclusions", value)

    @_builtins.property
    @pulumi.getter
    def filter(self) -> Optional[pulumi.Input[_builtins.str]]:
        """
        The filter to apply when exporting logs. Only log entries that match the filter are exported.
        See [Advanced Log Filters](https://cloud.google.com/logging/docs/view/advanced_filters) for information on how to
        write a filter.
        """
        return pulumi.get(self, "filter")

    @filter.setter
    def filter(self, value: Optional[pulumi.Input[_builtins.str]]):
        pulumi.set(self, "filter", value)

    @_builtins.property
    @pulumi.getter
    def name(self) -> Optional[pulumi.Input[_builtins.str]]:
        """
        The name of the logging sink. Logging automatically creates two sinks: `_Required` and `_Default`.
        """
        return pulumi.get(self, "name")

    @name.setter
    def name(self, value: Optional[pulumi.Input[_builtins.str]]):
        pulumi.set(self, "name", value)

    @_builtins.property
    @pulumi.getter
    def project(self) -> Optional[pulumi.Input[_builtins.str]]:
        """
        The ID of the project to create the sink in. If omitted, the project associated with the provider is
        used.
        """
        return pulumi.get(self, "project")

    @project.setter
    def project(self, value: Optional[pulumi.Input[_builtins.str]]):
        pulumi.set(self, "project", value)

    @_builtins.property
    @pulumi.getter(name="uniqueWriterIdentity")
    def unique_writer_identity(self) -> Optional[pulumi.Input[_builtins.bool]]:
        """
        Whether or not to create a unique identity associated with this sink. If `false`, then the `writer_identity` used is `serviceAccount:cloud-logs@system.gserviceaccount.com`. If `true` (the default),
        then a unique service account is created and used for this sink. If you wish to publish logs across projects or utilize
        `bigquery_options`, you must set `unique_writer_identity` to true.
        """
        return pulumi.get(self, "unique_writer_identity")

    @unique_writer_identity.setter
    def unique_writer_identity(self, value: Optional[pulumi.Input[_builtins.bool]]):
        pulumi.set(self, "unique_writer_identity", value)

    @_builtins.property
    @pulumi.getter(name="writerIdentity")
    def writer_identity(self) -> Optional[pulumi.Input[_builtins.str]]:
        """
        The identity associated with this sink. This identity must be granted write access to the
        configured `destination`.
        """
        return pulumi.get(self, "writer_identity")

    @writer_identity.setter
    def writer_identity(self, value: Optional[pulumi.Input[_builtins.str]]):
        pulumi.set(self, "writer_identity", value)


@pulumi.type_token("gcp:logging/projectSink:ProjectSink")
class ProjectSink(pulumi.CustomResource):
    @overload
    def __init__(__self__,
                 resource_name: str,
                 opts: Optional[pulumi.ResourceOptions] = None,
                 bigquery_options: Optional[pulumi.Input[Union['ProjectSinkBigqueryOptionsArgs', 'ProjectSinkBigqueryOptionsArgsDict']]] = None,
                 custom_writer_identity: Optional[pulumi.Input[_builtins.str]] = None,
                 description: Optional[pulumi.Input[_builtins.str]] = None,
                 destination: Optional[pulumi.Input[_builtins.str]] = None,
                 disabled: Optional[pulumi.Input[_builtins.bool]] = None,
                 exclusions: Optional[pulumi.Input[Sequence[pulumi.Input[Union['ProjectSinkExclusionArgs', 'ProjectSinkExclusionArgsDict']]]]] = None,
                 filter: Optional[pulumi.Input[_builtins.str]] = None,
                 name: Optional[pulumi.Input[_builtins.str]] = None,
                 project: Optional[pulumi.Input[_builtins.str]] = None,
                 unique_writer_identity: Optional[pulumi.Input[_builtins.bool]] = None,
                 __props__=None):
        """
        Manages a project-level logging sink. For more information see:

        * [API documentation](https://cloud.google.com/logging/docs/reference/v2/rest/v2/projects.sinks)
        * How-to Guides
            * [Exporting Logs](https://cloud.google.com/logging/docs/export)

        > You can specify exclusions for log sinks created by terraform by using the exclusions field of `logging.FolderSink`

        > **Note:** You must have [granted the "Logs Configuration Writer"](https://cloud.google.com/logging/docs/access-control) IAM role (`roles/logging.configWriter`) to the credentials used with this provider.

        > **Note** You must [enable the Cloud Resource Manager API](https://console.cloud.google.com/apis/library/cloudresourcemanager.googleapis.com)

        > **Note:** The `_Default` and `_Required` logging sinks are automatically created for a given project and cannot be deleted. Creating a resource of this type will acquire and update the resource that already exists at the desired location. These sinks cannot be removed so deleting this resource will remove the sink config from your terraform state but will leave the logging sink unchanged. The sinks that are currently automatically created are "_Default" and "_Required".

        ## Example Usage

        ### Basic Sink

        ```python
        import pulumi
        import pulumi_gcp as gcp

        my_sink = gcp.logging.ProjectSink("my-sink",
            name="my-pubsub-instance-sink",
            destination="pubsub.googleapis.com/projects/my-project/topics/instance-activity",
            filter="resource.type = gce_instance AND severity >= WARNING",
            unique_writer_identity=True)
        ```

        ### Cloud Storage Bucket Destination

        A more complete example follows: this creates a compute instance, as well as a log sink that logs all activity to a
        cloud storage bucket. Because we are using `unique_writer_identity`, we must grant it access to the bucket.

        Note that this grant requires the "Project IAM Admin" IAM role (`roles/resourcemanager.projectIamAdmin`) granted to the
        credentials used with Terraform.

        ```python
        import pulumi
        import pulumi_gcp as gcp

        # Our logged compute instance
        my_logged_instance = gcp.compute.Instance("my-logged-instance",
            network_interfaces=[{
                "access_configs": [{}],
                "network": "default",
            }],
            name="my-instance",
            machine_type="e2-medium",
            zone="us-central1-a",
            boot_disk={
                "initialize_params": {
                    "image": "debian-cloud/debian-11",
                },
            })
        # A gcs bucket to store logs in
        gcs_bucket = gcp.storage.Bucket("gcs-bucket",
            name="my-unique-logging-bucket",
            location="US")
        # Our sink; this logs all activity related to our "my-logged-instance" instance
        instance_sink = gcp.logging.ProjectSink("instance-sink",
            name="my-instance-sink",
            description="some explanation on what this is",
            destination=gcs_bucket.name.apply(lambda name: f"storage.googleapis.com/{name}"),
            filter=my_logged_instance.instance_id.apply(lambda instance_id: f"resource.type = gce_instance AND resource.labels.instance_id = \\"{instance_id}\\""),
            unique_writer_identity=True)
        # Because our sink uses a unique_writer, we must grant that writer access to the bucket.
        gcs_bucket_writer = gcp.projects.IAMBinding("gcs-bucket-writer",
            project="your-project-id",
            role="roles/storage.objectCreator",
            members=[instance_sink.writer_identity])
        ```

        ### User-Managed Service Account

        The following example creates a sink that are configured with user-managed service accounts, by specifying
        the `custom_writer_identity` field.

        Note that you can only create a sink that uses a user-managed service account when the sink destination
        is a log bucket.

        ```python
        import pulumi
        import pulumi_gcp as gcp

        custom_sa = gcp.serviceaccount.Account("custom-sa",
            project="other-project-id",
            account_id="gce-log-bucket-sink",
            display_name="gce-log-bucket-sink")
        # Create a sink that uses user-managed service account
        my_sink = gcp.logging.ProjectSink("my-sink",
            name="other-project-log-bucket-sink",
            destination="logging.googleapis.com/projects/other-project-id/locations/global/buckets/gce-logs",
            filter="resource.type = gce_instance AND severity >= WARNING",
            unique_writer_identity=True,
            custom_writer_identity=custom_sa.email)
        # grant writer access to the user-managed service account
        custom_sa_logbucket_binding = gcp.projects.IAMMember("custom-sa-logbucket-binding",
            project="destination-project-id",
            role="roles/logging.bucketWriter",
            member=custom_sa.email.apply(lambda email: f"serviceAccount:{email}"))
        ```

        The above example will create a log sink that route logs to destination GCP project using
        an user-managed service account.

        ### Sink Exclusions

        The following example uses `exclusions` to filter logs that will not be exported. In this example logs are exported to a [log bucket](https://cloud.google.com/logging/docs/buckets) and there are 2 exclusions configured

        ```python
        import pulumi
        import pulumi_gcp as gcp

        log_bucket = gcp.logging.ProjectSink("log-bucket",
            name="my-logging-sink",
            destination="logging.googleapis.com/projects/my-project/locations/global/buckets/_Default",
            exclusions=[
                {
                    "name": "nsexcllusion1",
                    "description": "Exclude logs from namespace-1 in k8s",
                    "filter": "resource.type = k8s_container resource.labels.namespace_name=\\"namespace-1\\" ",
                },
                {
                    "name": "nsexcllusion2",
                    "description": "Exclude logs from namespace-2 in k8s",
                    "filter": "resource.type = k8s_container resource.labels.namespace_name=\\"namespace-2\\" ",
                },
            ],
            unique_writer_identity=True)
        ```

        ## Import

        Project-level logging sinks can be imported using their URI, e.g.

        * `projects/{{project_id}}/sinks/{{name}}`

        When using the `pulumi import` command, project-level logging sinks can be imported using one of the formats above. For example:

        ```sh
        $ pulumi import gcp:logging/projectSink:ProjectSink default projects/{{project_id}}/sinks/{{name}}
        ```


        :param str resource_name: The name of the resource.
        :param pulumi.ResourceOptions opts: Options for the resource.
        :param pulumi.Input[Union['ProjectSinkBigqueryOptionsArgs', 'ProjectSinkBigqueryOptionsArgsDict']] bigquery_options: Options that affect sinks exporting data to BigQuery. Structure documented below.
        :param pulumi.Input[_builtins.str] custom_writer_identity: A user managed service account that will be used to write
               the log entries. The format must be `serviceAccount:some@email`. This field can only be specified if you are
               routing logs to a destination outside this sink's project. If not specified, a Logging service account
               will automatically be generated.
        :param pulumi.Input[_builtins.str] description: A description of this sink. The maximum length of the description is 8000 characters.
        :param pulumi.Input[_builtins.str] destination: The destination of the sink (or, in other words, where logs are written to). Can be a Cloud Storage bucket, a PubSub topic, a BigQuery dataset, a Cloud Logging bucket, or a Google Cloud project. Examples:
               
               - `storage.googleapis.com/[GCS_BUCKET]`
               - `bigquery.googleapis.com/projects/[PROJECT_ID]/datasets/[DATASET]`
               - `pubsub.googleapis.com/projects/[PROJECT_ID]/topics/[TOPIC_ID]`
               - `logging.googleapis.com/projects/[PROJECT_ID]/locations/global/buckets/[BUCKET_ID]`
               - `logging.googleapis.com/projects/[PROJECT_ID]`
               
               The writer associated with the sink must have access to write to the above resource.
        :param pulumi.Input[_builtins.bool] disabled: If set to True, then this sink is disabled and it does not export any log entries.
        :param pulumi.Input[Sequence[pulumi.Input[Union['ProjectSinkExclusionArgs', 'ProjectSinkExclusionArgsDict']]]] exclusions: Log entries that match any of the exclusion filters will not be exported. If a log entry is matched by both `filter` and one of `exclusions.filter`, it will not be exported.  Can be repeated multiple times for multiple exclusions. Structure is documented below.
        :param pulumi.Input[_builtins.str] filter: The filter to apply when exporting logs. Only log entries that match the filter are exported.
               See [Advanced Log Filters](https://cloud.google.com/logging/docs/view/advanced_filters) for information on how to
               write a filter.
        :param pulumi.Input[_builtins.str] name: The name of the logging sink. Logging automatically creates two sinks: `_Required` and `_Default`.
        :param pulumi.Input[_builtins.str] project: The ID of the project to create the sink in. If omitted, the project associated with the provider is
               used.
        :param pulumi.Input[_builtins.bool] unique_writer_identity: Whether or not to create a unique identity associated with this sink. If `false`, then the `writer_identity` used is `serviceAccount:cloud-logs@system.gserviceaccount.com`. If `true` (the default),
               then a unique service account is created and used for this sink. If you wish to publish logs across projects or utilize
               `bigquery_options`, you must set `unique_writer_identity` to true.
        """
        ...
    @overload
    def __init__(__self__,
                 resource_name: str,
                 args: ProjectSinkArgs,
                 opts: Optional[pulumi.ResourceOptions] = None):
        """
        Manages a project-level logging sink. For more information see:

        * [API documentation](https://cloud.google.com/logging/docs/reference/v2/rest/v2/projects.sinks)
        * How-to Guides
            * [Exporting Logs](https://cloud.google.com/logging/docs/export)

        > You can specify exclusions for log sinks created by terraform by using the exclusions field of `logging.FolderSink`

        > **Note:** You must have [granted the "Logs Configuration Writer"](https://cloud.google.com/logging/docs/access-control) IAM role (`roles/logging.configWriter`) to the credentials used with this provider.

        > **Note** You must [enable the Cloud Resource Manager API](https://console.cloud.google.com/apis/library/cloudresourcemanager.googleapis.com)

        > **Note:** The `_Default` and `_Required` logging sinks are automatically created for a given project and cannot be deleted. Creating a resource of this type will acquire and update the resource that already exists at the desired location. These sinks cannot be removed so deleting this resource will remove the sink config from your terraform state but will leave the logging sink unchanged. The sinks that are currently automatically created are "_Default" and "_Required".

        ## Example Usage

        ### Basic Sink

        ```python
        import pulumi
        import pulumi_gcp as gcp

        my_sink = gcp.logging.ProjectSink("my-sink",
            name="my-pubsub-instance-sink",
            destination="pubsub.googleapis.com/projects/my-project/topics/instance-activity",
            filter="resource.type = gce_instance AND severity >= WARNING",
            unique_writer_identity=True)
        ```

        ### Cloud Storage Bucket Destination

        A more complete example follows: this creates a compute instance, as well as a log sink that logs all activity to a
        cloud storage bucket. Because we are using `unique_writer_identity`, we must grant it access to the bucket.

        Note that this grant requires the "Project IAM Admin" IAM role (`roles/resourcemanager.projectIamAdmin`) granted to the
        credentials used with Terraform.

        ```python
        import pulumi
        import pulumi_gcp as gcp

        # Our logged compute instance
        my_logged_instance = gcp.compute.Instance("my-logged-instance",
            network_interfaces=[{
                "access_configs": [{}],
                "network": "default",
            }],
            name="my-instance",
            machine_type="e2-medium",
            zone="us-central1-a",
            boot_disk={
                "initialize_params": {
                    "image": "debian-cloud/debian-11",
                },
            })
        # A gcs bucket to store logs in
        gcs_bucket = gcp.storage.Bucket("gcs-bucket",
            name="my-unique-logging-bucket",
            location="US")
        # Our sink; this logs all activity related to our "my-logged-instance" instance
        instance_sink = gcp.logging.ProjectSink("instance-sink",
            name="my-instance-sink",
            description="some explanation on what this is",
            destination=gcs_bucket.name.apply(lambda name: f"storage.googleapis.com/{name}"),
            filter=my_logged_instance.instance_id.apply(lambda instance_id: f"resource.type = gce_instance AND resource.labels.instance_id = \\"{instance_id}\\""),
            unique_writer_identity=True)
        # Because our sink uses a unique_writer, we must grant that writer access to the bucket.
        gcs_bucket_writer = gcp.projects.IAMBinding("gcs-bucket-writer",
            project="your-project-id",
            role="roles/storage.objectCreator",
            members=[instance_sink.writer_identity])
        ```

        ### User-Managed Service Account

        The following example creates a sink that are configured with user-managed service accounts, by specifying
        the `custom_writer_identity` field.

        Note that you can only create a sink that uses a user-managed service account when the sink destination
        is a log bucket.

        ```python
        import pulumi
        import pulumi_gcp as gcp

        custom_sa = gcp.serviceaccount.Account("custom-sa",
            project="other-project-id",
            account_id="gce-log-bucket-sink",
            display_name="gce-log-bucket-sink")
        # Create a sink that uses user-managed service account
        my_sink = gcp.logging.ProjectSink("my-sink",
            name="other-project-log-bucket-sink",
            destination="logging.googleapis.com/projects/other-project-id/locations/global/buckets/gce-logs",
            filter="resource.type = gce_instance AND severity >= WARNING",
            unique_writer_identity=True,
            custom_writer_identity=custom_sa.email)
        # grant writer access to the user-managed service account
        custom_sa_logbucket_binding = gcp.projects.IAMMember("custom-sa-logbucket-binding",
            project="destination-project-id",
            role="roles/logging.bucketWriter",
            member=custom_sa.email.apply(lambda email: f"serviceAccount:{email}"))
        ```

        The above example will create a log sink that route logs to destination GCP project using
        an user-managed service account.

        ### Sink Exclusions

        The following example uses `exclusions` to filter logs that will not be exported. In this example logs are exported to a [log bucket](https://cloud.google.com/logging/docs/buckets) and there are 2 exclusions configured

        ```python
        import pulumi
        import pulumi_gcp as gcp

        log_bucket = gcp.logging.ProjectSink("log-bucket",
            name="my-logging-sink",
            destination="logging.googleapis.com/projects/my-project/locations/global/buckets/_Default",
            exclusions=[
                {
                    "name": "nsexcllusion1",
                    "description": "Exclude logs from namespace-1 in k8s",
                    "filter": "resource.type = k8s_container resource.labels.namespace_name=\\"namespace-1\\" ",
                },
                {
                    "name": "nsexcllusion2",
                    "description": "Exclude logs from namespace-2 in k8s",
                    "filter": "resource.type = k8s_container resource.labels.namespace_name=\\"namespace-2\\" ",
                },
            ],
            unique_writer_identity=True)
        ```

        ## Import

        Project-level logging sinks can be imported using their URI, e.g.

        * `projects/{{project_id}}/sinks/{{name}}`

        When using the `pulumi import` command, project-level logging sinks can be imported using one of the formats above. For example:

        ```sh
        $ pulumi import gcp:logging/projectSink:ProjectSink default projects/{{project_id}}/sinks/{{name}}
        ```


        :param str resource_name: The name of the resource.
        :param ProjectSinkArgs args: The arguments to use to populate this resource's properties.
        :param pulumi.ResourceOptions opts: Options for the resource.
        """
        ...
    def __init__(__self__, resource_name: str, *args, **kwargs):
        resource_args, opts = _utilities.get_resource_args_opts(ProjectSinkArgs, pulumi.ResourceOptions, *args, **kwargs)
        if resource_args is not None:
            __self__._internal_init(resource_name, opts, **resource_args.__dict__)
        else:
            __self__._internal_init(resource_name, *args, **kwargs)

    def _internal_init(__self__,
                 resource_name: str,
                 opts: Optional[pulumi.ResourceOptions] = None,
                 bigquery_options: Optional[pulumi.Input[Union['ProjectSinkBigqueryOptionsArgs', 'ProjectSinkBigqueryOptionsArgsDict']]] = None,
                 custom_writer_identity: Optional[pulumi.Input[_builtins.str]] = None,
                 description: Optional[pulumi.Input[_builtins.str]] = None,
                 destination: Optional[pulumi.Input[_builtins.str]] = None,
                 disabled: Optional[pulumi.Input[_builtins.bool]] = None,
                 exclusions: Optional[pulumi.Input[Sequence[pulumi.Input[Union['ProjectSinkExclusionArgs', 'ProjectSinkExclusionArgsDict']]]]] = None,
                 filter: Optional[pulumi.Input[_builtins.str]] = None,
                 name: Optional[pulumi.Input[_builtins.str]] = None,
                 project: Optional[pulumi.Input[_builtins.str]] = None,
                 unique_writer_identity: Optional[pulumi.Input[_builtins.bool]] = None,
                 __props__=None):
        opts = pulumi.ResourceOptions.merge(_utilities.get_resource_opts_defaults(), opts)
        if not isinstance(opts, pulumi.ResourceOptions):
            raise TypeError('Expected resource options to be a ResourceOptions instance')
        if opts.id is None:
            if __props__ is not None:
                raise TypeError('__props__ is only valid when passed in combination with a valid opts.id to get an existing resource')
            __props__ = ProjectSinkArgs.__new__(ProjectSinkArgs)

            __props__.__dict__["bigquery_options"] = bigquery_options
            __props__.__dict__["custom_writer_identity"] = custom_writer_identity
            __props__.__dict__["description"] = description
            if destination is None and not opts.urn:
                raise TypeError("Missing required property 'destination'")
            __props__.__dict__["destination"] = destination
            __props__.__dict__["disabled"] = disabled
            __props__.__dict__["exclusions"] = exclusions
            __props__.__dict__["filter"] = filter
            __props__.__dict__["name"] = name
            __props__.__dict__["project"] = project
            __props__.__dict__["unique_writer_identity"] = unique_writer_identity
            __props__.__dict__["writer_identity"] = None
        super(ProjectSink, __self__).__init__(
            'gcp:logging/projectSink:ProjectSink',
            resource_name,
            __props__,
            opts)

    @staticmethod
    def get(resource_name: str,
            id: pulumi.Input[str],
            opts: Optional[pulumi.ResourceOptions] = None,
            bigquery_options: Optional[pulumi.Input[Union['ProjectSinkBigqueryOptionsArgs', 'ProjectSinkBigqueryOptionsArgsDict']]] = None,
            custom_writer_identity: Optional[pulumi.Input[_builtins.str]] = None,
            description: Optional[pulumi.Input[_builtins.str]] = None,
            destination: Optional[pulumi.Input[_builtins.str]] = None,
            disabled: Optional[pulumi.Input[_builtins.bool]] = None,
            exclusions: Optional[pulumi.Input[Sequence[pulumi.Input[Union['ProjectSinkExclusionArgs', 'ProjectSinkExclusionArgsDict']]]]] = None,
            filter: Optional[pulumi.Input[_builtins.str]] = None,
            name: Optional[pulumi.Input[_builtins.str]] = None,
            project: Optional[pulumi.Input[_builtins.str]] = None,
            unique_writer_identity: Optional[pulumi.Input[_builtins.bool]] = None,
            writer_identity: Optional[pulumi.Input[_builtins.str]] = None) -> 'ProjectSink':
        """
        Get an existing ProjectSink resource's state with the given name, id, and optional extra
        properties used to qualify the lookup.

        :param str resource_name: The unique name of the resulting resource.
        :param pulumi.Input[str] id: The unique provider ID of the resource to lookup.
        :param pulumi.ResourceOptions opts: Options for the resource.
        :param pulumi.Input[Union['ProjectSinkBigqueryOptionsArgs', 'ProjectSinkBigqueryOptionsArgsDict']] bigquery_options: Options that affect sinks exporting data to BigQuery. Structure documented below.
        :param pulumi.Input[_builtins.str] custom_writer_identity: A user managed service account that will be used to write
               the log entries. The format must be `serviceAccount:some@email`. This field can only be specified if you are
               routing logs to a destination outside this sink's project. If not specified, a Logging service account
               will automatically be generated.
        :param pulumi.Input[_builtins.str] description: A description of this sink. The maximum length of the description is 8000 characters.
        :param pulumi.Input[_builtins.str] destination: The destination of the sink (or, in other words, where logs are written to). Can be a Cloud Storage bucket, a PubSub topic, a BigQuery dataset, a Cloud Logging bucket, or a Google Cloud project. Examples:
               
               - `storage.googleapis.com/[GCS_BUCKET]`
               - `bigquery.googleapis.com/projects/[PROJECT_ID]/datasets/[DATASET]`
               - `pubsub.googleapis.com/projects/[PROJECT_ID]/topics/[TOPIC_ID]`
               - `logging.googleapis.com/projects/[PROJECT_ID]/locations/global/buckets/[BUCKET_ID]`
               - `logging.googleapis.com/projects/[PROJECT_ID]`
               
               The writer associated with the sink must have access to write to the above resource.
        :param pulumi.Input[_builtins.bool] disabled: If set to True, then this sink is disabled and it does not export any log entries.
        :param pulumi.Input[Sequence[pulumi.Input[Union['ProjectSinkExclusionArgs', 'ProjectSinkExclusionArgsDict']]]] exclusions: Log entries that match any of the exclusion filters will not be exported. If a log entry is matched by both `filter` and one of `exclusions.filter`, it will not be exported.  Can be repeated multiple times for multiple exclusions. Structure is documented below.
        :param pulumi.Input[_builtins.str] filter: The filter to apply when exporting logs. Only log entries that match the filter are exported.
               See [Advanced Log Filters](https://cloud.google.com/logging/docs/view/advanced_filters) for information on how to
               write a filter.
        :param pulumi.Input[_builtins.str] name: The name of the logging sink. Logging automatically creates two sinks: `_Required` and `_Default`.
        :param pulumi.Input[_builtins.str] project: The ID of the project to create the sink in. If omitted, the project associated with the provider is
               used.
        :param pulumi.Input[_builtins.bool] unique_writer_identity: Whether or not to create a unique identity associated with this sink. If `false`, then the `writer_identity` used is `serviceAccount:cloud-logs@system.gserviceaccount.com`. If `true` (the default),
               then a unique service account is created and used for this sink. If you wish to publish logs across projects or utilize
               `bigquery_options`, you must set `unique_writer_identity` to true.
        :param pulumi.Input[_builtins.str] writer_identity: The identity associated with this sink. This identity must be granted write access to the
               configured `destination`.
        """
        opts = pulumi.ResourceOptions.merge(opts, pulumi.ResourceOptions(id=id))

        __props__ = _ProjectSinkState.__new__(_ProjectSinkState)

        __props__.__dict__["bigquery_options"] = bigquery_options
        __props__.__dict__["custom_writer_identity"] = custom_writer_identity
        __props__.__dict__["description"] = description
        __props__.__dict__["destination"] = destination
        __props__.__dict__["disabled"] = disabled
        __props__.__dict__["exclusions"] = exclusions
        __props__.__dict__["filter"] = filter
        __props__.__dict__["name"] = name
        __props__.__dict__["project"] = project
        __props__.__dict__["unique_writer_identity"] = unique_writer_identity
        __props__.__dict__["writer_identity"] = writer_identity
        return ProjectSink(resource_name, opts=opts, __props__=__props__)

    @_builtins.property
    @pulumi.getter(name="bigqueryOptions")
    def bigquery_options(self) -> pulumi.Output['outputs.ProjectSinkBigqueryOptions']:
        """
        Options that affect sinks exporting data to BigQuery. Structure documented below.
        """
        return pulumi.get(self, "bigquery_options")

    @_builtins.property
    @pulumi.getter(name="customWriterIdentity")
    def custom_writer_identity(self) -> pulumi.Output[Optional[_builtins.str]]:
        """
        A user managed service account that will be used to write
        the log entries. The format must be `serviceAccount:some@email`. This field can only be specified if you are
        routing logs to a destination outside this sink's project. If not specified, a Logging service account
        will automatically be generated.
        """
        return pulumi.get(self, "custom_writer_identity")

    @_builtins.property
    @pulumi.getter
    def description(self) -> pulumi.Output[Optional[_builtins.str]]:
        """
        A description of this sink. The maximum length of the description is 8000 characters.
        """
        return pulumi.get(self, "description")

    @_builtins.property
    @pulumi.getter
    def destination(self) -> pulumi.Output[_builtins.str]:
        """
        The destination of the sink (or, in other words, where logs are written to). Can be a Cloud Storage bucket, a PubSub topic, a BigQuery dataset, a Cloud Logging bucket, or a Google Cloud project. Examples:

        - `storage.googleapis.com/[GCS_BUCKET]`
        - `bigquery.googleapis.com/projects/[PROJECT_ID]/datasets/[DATASET]`
        - `pubsub.googleapis.com/projects/[PROJECT_ID]/topics/[TOPIC_ID]`
        - `logging.googleapis.com/projects/[PROJECT_ID]/locations/global/buckets/[BUCKET_ID]`
        - `logging.googleapis.com/projects/[PROJECT_ID]`

        The writer associated with the sink must have access to write to the above resource.
        """
        return pulumi.get(self, "destination")

    @_builtins.property
    @pulumi.getter
    def disabled(self) -> pulumi.Output[Optional[_builtins.bool]]:
        """
        If set to True, then this sink is disabled and it does not export any log entries.
        """
        return pulumi.get(self, "disabled")

    @_builtins.property
    @pulumi.getter
    def exclusions(self) -> pulumi.Output[Optional[Sequence['outputs.ProjectSinkExclusion']]]:
        """
        Log entries that match any of the exclusion filters will not be exported. If a log entry is matched by both `filter` and one of `exclusions.filter`, it will not be exported.  Can be repeated multiple times for multiple exclusions. Structure is documented below.
        """
        return pulumi.get(self, "exclusions")

    @_builtins.property
    @pulumi.getter
    def filter(self) -> pulumi.Output[Optional[_builtins.str]]:
        """
        The filter to apply when exporting logs. Only log entries that match the filter are exported.
        See [Advanced Log Filters](https://cloud.google.com/logging/docs/view/advanced_filters) for information on how to
        write a filter.
        """
        return pulumi.get(self, "filter")

    @_builtins.property
    @pulumi.getter
    def name(self) -> pulumi.Output[_builtins.str]:
        """
        The name of the logging sink. Logging automatically creates two sinks: `_Required` and `_Default`.
        """
        return pulumi.get(self, "name")

    @_builtins.property
    @pulumi.getter
    def project(self) -> pulumi.Output[_builtins.str]:
        """
        The ID of the project to create the sink in. If omitted, the project associated with the provider is
        used.
        """
        return pulumi.get(self, "project")

    @_builtins.property
    @pulumi.getter(name="uniqueWriterIdentity")
    def unique_writer_identity(self) -> pulumi.Output[Optional[_builtins.bool]]:
        """
        Whether or not to create a unique identity associated with this sink. If `false`, then the `writer_identity` used is `serviceAccount:cloud-logs@system.gserviceaccount.com`. If `true` (the default),
        then a unique service account is created and used for this sink. If you wish to publish logs across projects or utilize
        `bigquery_options`, you must set `unique_writer_identity` to true.
        """
        return pulumi.get(self, "unique_writer_identity")

    @_builtins.property
    @pulumi.getter(name="writerIdentity")
    def writer_identity(self) -> pulumi.Output[_builtins.str]:
        """
        The identity associated with this sink. This identity must be granted write access to the
        configured `destination`.
        """
        return pulumi.get(self, "writer_identity")

