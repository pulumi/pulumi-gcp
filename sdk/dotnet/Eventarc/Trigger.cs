// *** WARNING: this file was generated by pulumi-language-dotnet. ***
// *** Do not edit by hand unless you're certain you know what you are doing! ***

using System;
using System.Collections.Generic;
using System.Collections.Immutable;
using System.Threading.Tasks;
using Pulumi.Serialization;

namespace Pulumi.Gcp.Eventarc
{
    /// <summary>
    /// The Eventarc Trigger resource
    /// 
    /// To get more information about Trigger, see:
    /// 
    /// * [API documentation](https://cloud.google.com/eventarc/docs/reference/rest/v1/projects.locations.triggers)
    /// * How-to Guides
    ///     * [Official Documentation](https://cloud.google.com/eventarc/standard/docs/overview#eventarc-triggers)
    /// 
    /// ## Example Usage
    /// 
    /// ### Eventarc Trigger With Cloud Run Destination
    /// 
    /// ```csharp
    /// using System.Collections.Generic;
    /// using System.Linq;
    /// using Pulumi;
    /// using Gcp = Pulumi.Gcp;
    /// 
    /// return await Deployment.RunAsync(() =&gt; 
    /// {
    ///     var foo = new Gcp.PubSub.Topic("foo", new()
    ///     {
    ///         Name = "some-topic",
    ///     });
    /// 
    ///     var @default = new Gcp.CloudRun.Service("default", new()
    ///     {
    ///         Name = "some-service",
    ///         Location = "us-central1",
    ///         Template = new Gcp.CloudRun.Inputs.ServiceTemplateArgs
    ///         {
    ///             Spec = new Gcp.CloudRun.Inputs.ServiceTemplateSpecArgs
    ///             {
    ///                 Containers = new[]
    ///                 {
    ///                     new Gcp.CloudRun.Inputs.ServiceTemplateSpecContainerArgs
    ///                     {
    ///                         Image = "gcr.io/cloudrun/hello",
    ///                         Ports = new[]
    ///                         {
    ///                             new Gcp.CloudRun.Inputs.ServiceTemplateSpecContainerPortArgs
    ///                             {
    ///                                 ContainerPort = 8080,
    ///                             },
    ///                         },
    ///                     },
    ///                 },
    ///                 ContainerConcurrency = 50,
    ///                 TimeoutSeconds = 100,
    ///             },
    ///         },
    ///         Traffics = new[]
    ///         {
    ///             new Gcp.CloudRun.Inputs.ServiceTrafficArgs
    ///             {
    ///                 Percent = 100,
    ///                 LatestRevision = true,
    ///             },
    ///         },
    ///     });
    /// 
    ///     var primary = new Gcp.Eventarc.Trigger("primary", new()
    ///     {
    ///         Name = "some-trigger",
    ///         Location = "us-central1",
    ///         MatchingCriterias = new[]
    ///         {
    ///             new Gcp.Eventarc.Inputs.TriggerMatchingCriteriaArgs
    ///             {
    ///                 Attribute = "type",
    ///                 Value = "google.cloud.pubsub.topic.v1.messagePublished",
    ///             },
    ///         },
    ///         Destination = new Gcp.Eventarc.Inputs.TriggerDestinationArgs
    ///         {
    ///             CloudRunService = new Gcp.Eventarc.Inputs.TriggerDestinationCloudRunServiceArgs
    ///             {
    ///                 Service = @default.Name,
    ///                 Region = "us-central1",
    ///             },
    ///         },
    ///         Labels = 
    ///         {
    ///             { "foo", "bar" },
    ///         },
    ///         Transport = new Gcp.Eventarc.Inputs.TriggerTransportArgs
    ///         {
    ///             Pubsub = new Gcp.Eventarc.Inputs.TriggerTransportPubsubArgs
    ///             {
    ///                 Topic = foo.Id,
    ///             },
    ///         },
    ///     });
    /// 
    /// });
    /// ```
    /// 
    /// ## Import
    /// 
    /// Trigger can be imported using any of these accepted formats:
    /// 
    /// * `projects/{{project}}/locations/{{location}}/triggers/{{name}}`
    /// 
    /// * `{{project}}/{{location}}/{{name}}`
    /// 
    /// * `{{location}}/{{name}}`
    /// 
    /// When using the `pulumi import` command, Trigger can be imported using one of the formats above. For example:
    /// 
    /// ```sh
    /// $ pulumi import gcp:eventarc/trigger:Trigger default projects/{{project}}/locations/{{location}}/triggers/{{name}}
    /// ```
    /// 
    /// ```sh
    /// $ pulumi import gcp:eventarc/trigger:Trigger default {{project}}/{{location}}/{{name}}
    /// ```
    /// 
    /// ```sh
    /// $ pulumi import gcp:eventarc/trigger:Trigger default {{location}}/{{name}}
    /// ```
    /// </summary>
    [GcpResourceType("gcp:eventarc/trigger:Trigger")]
    public partial class Trigger : global::Pulumi.CustomResource
    {
        /// <summary>
        /// Optional. The name of the channel associated with the trigger in `projects/{project}/locations/{location}/channels/{channel}` format. You must provide a channel to receive events from Eventarc SaaS partners.
        /// </summary>
        [Output("channel")]
        public Output<string?> Channel { get; private set; } = null!;

        /// <summary>
        /// Output only. The reason(s) why a trigger is in FAILED state.
        /// </summary>
        [Output("conditions")]
        public Output<ImmutableDictionary<string, string>> Conditions { get; private set; } = null!;

        /// <summary>
        /// Output only. The creation time.
        /// </summary>
        [Output("createTime")]
        public Output<string> CreateTime { get; private set; } = null!;

        /// <summary>
        /// Required. Destination specifies where the events should be sent to.
        /// Structure is documented below.
        /// </summary>
        [Output("destination")]
        public Output<Outputs.TriggerDestination> Destination { get; private set; } = null!;

        /// <summary>
        /// All of labels (key/value pairs) present on the resource in GCP, including the labels configured through Pulumi, other clients and services.
        /// </summary>
        [Output("effectiveLabels")]
        public Output<ImmutableDictionary<string, string>> EffectiveLabels { get; private set; } = null!;

        /// <summary>
        /// Output only. This checksum is computed by the server based on the value of other fields, and may be sent only on create requests to ensure the client has an up-to-date value before proceeding.
        /// </summary>
        [Output("etag")]
        public Output<string> Etag { get; private set; } = null!;

        /// <summary>
        /// Optional. EventDataContentType specifies the type of payload in MIME format that is expected from the CloudEvent data field. This is set to `application/json` if the value is not defined.
        /// </summary>
        [Output("eventDataContentType")]
        public Output<string> EventDataContentType { get; private set; } = null!;

        /// <summary>
        /// Optional. User labels attached to the triggers that can be used to group resources.
        /// **Note**: This field is non-authoritative, and will only manage the labels present in your configuration.
        /// Please refer to the field `EffectiveLabels` for all of the labels present on the resource.
        /// </summary>
        [Output("labels")]
        public Output<ImmutableDictionary<string, string>?> Labels { get; private set; } = null!;

        /// <summary>
        /// The location for the resource
        /// </summary>
        [Output("location")]
        public Output<string> Location { get; private set; } = null!;

        /// <summary>
        /// Required. null The list of filters that applies to event attributes. Only events that match all the provided filters will be sent to the destination.
        /// Structure is documented below.
        /// </summary>
        [Output("matchingCriterias")]
        public Output<ImmutableArray<Outputs.TriggerMatchingCriteria>> MatchingCriterias { get; private set; } = null!;

        /// <summary>
        /// Required. The resource name of the trigger. Must be unique within the location on the project.
        /// </summary>
        [Output("name")]
        public Output<string> Name { get; private set; } = null!;

        /// <summary>
        /// The ID of the project in which the resource belongs.
        /// If it is not provided, the provider project is used.
        /// </summary>
        [Output("project")]
        public Output<string> Project { get; private set; } = null!;

        /// <summary>
        /// The combination of labels configured directly on the resource
        /// and default labels configured on the provider.
        /// </summary>
        [Output("pulumiLabels")]
        public Output<ImmutableDictionary<string, string>> PulumiLabels { get; private set; } = null!;

        /// <summary>
        /// Optional. The IAM service account email associated with the trigger. The service account represents the identity of the trigger. The principal who calls this API must have `iam.serviceAccounts.actAs` permission in the service account. See https://cloud.google.com/iam/docs/understanding-service-accounts#sa_common for more information. For Cloud Run destinations, this service account is used to generate identity tokens when invoking the service. See https://cloud.google.com/run/docs/triggering/pubsub-push#create-service-account for information on how to invoke authenticated Cloud Run services. In order to create Audit Log triggers, the service account should also have `roles/eventarc.eventReceiver` IAM role.
        /// </summary>
        [Output("serviceAccount")]
        public Output<string?> ServiceAccount { get; private set; } = null!;

        /// <summary>
        /// Optional. In order to deliver messages, Eventarc may use other GCP products as transport intermediary. This field contains a reference to that transport intermediary. This information can be used for debugging purposes.
        /// Structure is documented below.
        /// </summary>
        [Output("transport")]
        public Output<Outputs.TriggerTransport> Transport { get; private set; } = null!;

        /// <summary>
        /// Output only. Server assigned unique identifier for the trigger. The value is a UUID4 string and guaranteed to remain unchanged until the resource is deleted.
        /// </summary>
        [Output("uid")]
        public Output<string> Uid { get; private set; } = null!;

        /// <summary>
        /// Output only. The last-modified time.
        /// </summary>
        [Output("updateTime")]
        public Output<string> UpdateTime { get; private set; } = null!;


        /// <summary>
        /// Create a Trigger resource with the given unique name, arguments, and options.
        /// </summary>
        ///
        /// <param name="name">The unique name of the resource</param>
        /// <param name="args">The arguments used to populate this resource's properties</param>
        /// <param name="options">A bag of options that control this resource's behavior</param>
        public Trigger(string name, TriggerArgs args, CustomResourceOptions? options = null)
            : base("gcp:eventarc/trigger:Trigger", name, args ?? new TriggerArgs(), MakeResourceOptions(options, ""))
        {
        }

        private Trigger(string name, Input<string> id, TriggerState? state = null, CustomResourceOptions? options = null)
            : base("gcp:eventarc/trigger:Trigger", name, state, MakeResourceOptions(options, id))
        {
        }

        private static CustomResourceOptions MakeResourceOptions(CustomResourceOptions? options, Input<string>? id)
        {
            var defaultOptions = new CustomResourceOptions
            {
                Version = Utilities.Version,
                AdditionalSecretOutputs =
                {
                    "effectiveLabels",
                    "pulumiLabels",
                },
            };
            var merged = CustomResourceOptions.Merge(defaultOptions, options);
            // Override the ID if one was specified for consistency with other language SDKs.
            merged.Id = id ?? merged.Id;
            return merged;
        }
        /// <summary>
        /// Get an existing Trigger resource's state with the given name, ID, and optional extra
        /// properties used to qualify the lookup.
        /// </summary>
        ///
        /// <param name="name">The unique name of the resulting resource.</param>
        /// <param name="id">The unique provider ID of the resource to lookup.</param>
        /// <param name="state">Any extra arguments used during the lookup.</param>
        /// <param name="options">A bag of options that control this resource's behavior</param>
        public static Trigger Get(string name, Input<string> id, TriggerState? state = null, CustomResourceOptions? options = null)
        {
            return new Trigger(name, id, state, options);
        }
    }

    public sealed class TriggerArgs : global::Pulumi.ResourceArgs
    {
        /// <summary>
        /// Optional. The name of the channel associated with the trigger in `projects/{project}/locations/{location}/channels/{channel}` format. You must provide a channel to receive events from Eventarc SaaS partners.
        /// </summary>
        [Input("channel")]
        public Input<string>? Channel { get; set; }

        /// <summary>
        /// Required. Destination specifies where the events should be sent to.
        /// Structure is documented below.
        /// </summary>
        [Input("destination", required: true)]
        public Input<Inputs.TriggerDestinationArgs> Destination { get; set; } = null!;

        /// <summary>
        /// Optional. EventDataContentType specifies the type of payload in MIME format that is expected from the CloudEvent data field. This is set to `application/json` if the value is not defined.
        /// </summary>
        [Input("eventDataContentType")]
        public Input<string>? EventDataContentType { get; set; }

        [Input("labels")]
        private InputMap<string>? _labels;

        /// <summary>
        /// Optional. User labels attached to the triggers that can be used to group resources.
        /// **Note**: This field is non-authoritative, and will only manage the labels present in your configuration.
        /// Please refer to the field `EffectiveLabels` for all of the labels present on the resource.
        /// </summary>
        public InputMap<string> Labels
        {
            get => _labels ?? (_labels = new InputMap<string>());
            set => _labels = value;
        }

        /// <summary>
        /// The location for the resource
        /// </summary>
        [Input("location", required: true)]
        public Input<string> Location { get; set; } = null!;

        [Input("matchingCriterias", required: true)]
        private InputList<Inputs.TriggerMatchingCriteriaArgs>? _matchingCriterias;

        /// <summary>
        /// Required. null The list of filters that applies to event attributes. Only events that match all the provided filters will be sent to the destination.
        /// Structure is documented below.
        /// </summary>
        public InputList<Inputs.TriggerMatchingCriteriaArgs> MatchingCriterias
        {
            get => _matchingCriterias ?? (_matchingCriterias = new InputList<Inputs.TriggerMatchingCriteriaArgs>());
            set => _matchingCriterias = value;
        }

        /// <summary>
        /// Required. The resource name of the trigger. Must be unique within the location on the project.
        /// </summary>
        [Input("name")]
        public Input<string>? Name { get; set; }

        /// <summary>
        /// The ID of the project in which the resource belongs.
        /// If it is not provided, the provider project is used.
        /// </summary>
        [Input("project")]
        public Input<string>? Project { get; set; }

        /// <summary>
        /// Optional. The IAM service account email associated with the trigger. The service account represents the identity of the trigger. The principal who calls this API must have `iam.serviceAccounts.actAs` permission in the service account. See https://cloud.google.com/iam/docs/understanding-service-accounts#sa_common for more information. For Cloud Run destinations, this service account is used to generate identity tokens when invoking the service. See https://cloud.google.com/run/docs/triggering/pubsub-push#create-service-account for information on how to invoke authenticated Cloud Run services. In order to create Audit Log triggers, the service account should also have `roles/eventarc.eventReceiver` IAM role.
        /// </summary>
        [Input("serviceAccount")]
        public Input<string>? ServiceAccount { get; set; }

        /// <summary>
        /// Optional. In order to deliver messages, Eventarc may use other GCP products as transport intermediary. This field contains a reference to that transport intermediary. This information can be used for debugging purposes.
        /// Structure is documented below.
        /// </summary>
        [Input("transport")]
        public Input<Inputs.TriggerTransportArgs>? Transport { get; set; }

        public TriggerArgs()
        {
        }
        public static new TriggerArgs Empty => new TriggerArgs();
    }

    public sealed class TriggerState : global::Pulumi.ResourceArgs
    {
        /// <summary>
        /// Optional. The name of the channel associated with the trigger in `projects/{project}/locations/{location}/channels/{channel}` format. You must provide a channel to receive events from Eventarc SaaS partners.
        /// </summary>
        [Input("channel")]
        public Input<string>? Channel { get; set; }

        [Input("conditions")]
        private InputMap<string>? _conditions;

        /// <summary>
        /// Output only. The reason(s) why a trigger is in FAILED state.
        /// </summary>
        public InputMap<string> Conditions
        {
            get => _conditions ?? (_conditions = new InputMap<string>());
            set => _conditions = value;
        }

        /// <summary>
        /// Output only. The creation time.
        /// </summary>
        [Input("createTime")]
        public Input<string>? CreateTime { get; set; }

        /// <summary>
        /// Required. Destination specifies where the events should be sent to.
        /// Structure is documented below.
        /// </summary>
        [Input("destination")]
        public Input<Inputs.TriggerDestinationGetArgs>? Destination { get; set; }

        [Input("effectiveLabels")]
        private InputMap<string>? _effectiveLabels;

        /// <summary>
        /// All of labels (key/value pairs) present on the resource in GCP, including the labels configured through Pulumi, other clients and services.
        /// </summary>
        public InputMap<string> EffectiveLabels
        {
            get => _effectiveLabels ?? (_effectiveLabels = new InputMap<string>());
            set
            {
                var emptySecret = Output.CreateSecret(ImmutableDictionary.Create<string, string>());
                _effectiveLabels = Output.All(value, emptySecret).Apply(v => v[0]);
            }
        }

        /// <summary>
        /// Output only. This checksum is computed by the server based on the value of other fields, and may be sent only on create requests to ensure the client has an up-to-date value before proceeding.
        /// </summary>
        [Input("etag")]
        public Input<string>? Etag { get; set; }

        /// <summary>
        /// Optional. EventDataContentType specifies the type of payload in MIME format that is expected from the CloudEvent data field. This is set to `application/json` if the value is not defined.
        /// </summary>
        [Input("eventDataContentType")]
        public Input<string>? EventDataContentType { get; set; }

        [Input("labels")]
        private InputMap<string>? _labels;

        /// <summary>
        /// Optional. User labels attached to the triggers that can be used to group resources.
        /// **Note**: This field is non-authoritative, and will only manage the labels present in your configuration.
        /// Please refer to the field `EffectiveLabels` for all of the labels present on the resource.
        /// </summary>
        public InputMap<string> Labels
        {
            get => _labels ?? (_labels = new InputMap<string>());
            set => _labels = value;
        }

        /// <summary>
        /// The location for the resource
        /// </summary>
        [Input("location")]
        public Input<string>? Location { get; set; }

        [Input("matchingCriterias")]
        private InputList<Inputs.TriggerMatchingCriteriaGetArgs>? _matchingCriterias;

        /// <summary>
        /// Required. null The list of filters that applies to event attributes. Only events that match all the provided filters will be sent to the destination.
        /// Structure is documented below.
        /// </summary>
        public InputList<Inputs.TriggerMatchingCriteriaGetArgs> MatchingCriterias
        {
            get => _matchingCriterias ?? (_matchingCriterias = new InputList<Inputs.TriggerMatchingCriteriaGetArgs>());
            set => _matchingCriterias = value;
        }

        /// <summary>
        /// Required. The resource name of the trigger. Must be unique within the location on the project.
        /// </summary>
        [Input("name")]
        public Input<string>? Name { get; set; }

        /// <summary>
        /// The ID of the project in which the resource belongs.
        /// If it is not provided, the provider project is used.
        /// </summary>
        [Input("project")]
        public Input<string>? Project { get; set; }

        [Input("pulumiLabels")]
        private InputMap<string>? _pulumiLabels;

        /// <summary>
        /// The combination of labels configured directly on the resource
        /// and default labels configured on the provider.
        /// </summary>
        public InputMap<string> PulumiLabels
        {
            get => _pulumiLabels ?? (_pulumiLabels = new InputMap<string>());
            set
            {
                var emptySecret = Output.CreateSecret(ImmutableDictionary.Create<string, string>());
                _pulumiLabels = Output.All(value, emptySecret).Apply(v => v[0]);
            }
        }

        /// <summary>
        /// Optional. The IAM service account email associated with the trigger. The service account represents the identity of the trigger. The principal who calls this API must have `iam.serviceAccounts.actAs` permission in the service account. See https://cloud.google.com/iam/docs/understanding-service-accounts#sa_common for more information. For Cloud Run destinations, this service account is used to generate identity tokens when invoking the service. See https://cloud.google.com/run/docs/triggering/pubsub-push#create-service-account for information on how to invoke authenticated Cloud Run services. In order to create Audit Log triggers, the service account should also have `roles/eventarc.eventReceiver` IAM role.
        /// </summary>
        [Input("serviceAccount")]
        public Input<string>? ServiceAccount { get; set; }

        /// <summary>
        /// Optional. In order to deliver messages, Eventarc may use other GCP products as transport intermediary. This field contains a reference to that transport intermediary. This information can be used for debugging purposes.
        /// Structure is documented below.
        /// </summary>
        [Input("transport")]
        public Input<Inputs.TriggerTransportGetArgs>? Transport { get; set; }

        /// <summary>
        /// Output only. Server assigned unique identifier for the trigger. The value is a UUID4 string and guaranteed to remain unchanged until the resource is deleted.
        /// </summary>
        [Input("uid")]
        public Input<string>? Uid { get; set; }

        /// <summary>
        /// Output only. The last-modified time.
        /// </summary>
        [Input("updateTime")]
        public Input<string>? UpdateTime { get; set; }

        public TriggerState()
        {
        }
        public static new TriggerState Empty => new TriggerState();
    }
}
