// *** WARNING: this file was generated by pulumi-language-dotnet. ***
// *** Do not edit by hand unless you're certain you know what you are doing! ***

using System;
using System.Collections.Generic;
using System.Collections.Immutable;
using System.Threading.Tasks;
using Pulumi.Serialization;

namespace Pulumi.Gcp.Storage
{
    /// <summary>
    /// Creates a new Transfer Job in Google Cloud Storage Transfer.
    /// 
    /// To get more information about Google Cloud Storage Transfer, see:
    /// 
    /// * [Overview](https://cloud.google.com/storage-transfer/docs/overview)
    /// * [API documentation](https://cloud.google.com/storage-transfer/docs/reference/rest/v1/transferJobs)
    /// * How-to Guides
    ///     * [Configuring Access to Data Sources and Sinks](https://cloud.google.com/storage-transfer/docs/configure-access)
    /// 
    /// ## Example Usage
    /// 
    /// Example creating a nightly Transfer Job from an AWS S3 Bucket to a GCS bucket.
    /// 
    /// ```csharp
    /// using System.Collections.Generic;
    /// using System.Linq;
    /// using Pulumi;
    /// using Gcp = Pulumi.Gcp;
    /// 
    /// return await Deployment.RunAsync(() =&gt; 
    /// {
    ///     var @default = Gcp.Storage.GetTransferProjectServiceAccount.Invoke(new()
    ///     {
    ///         Project = project,
    ///     });
    /// 
    ///     var s3_backup_bucket = new Gcp.Storage.Bucket("s3-backup-bucket", new()
    ///     {
    ///         Name = $"{awsS3Bucket}-backup",
    ///         StorageClass = "NEARLINE",
    ///         Project = project,
    ///         Location = "US",
    ///     });
    /// 
    ///     var s3_backup_bucketBucketIAMMember = new Gcp.Storage.BucketIAMMember("s3-backup-bucket", new()
    ///     {
    ///         Bucket = s3_backup_bucket.Name,
    ///         Role = "roles/storage.admin",
    ///         Member = @default.Apply(@default =&gt; $"serviceAccount:{@default.Apply(getTransferProjectServiceAccountResult =&gt; getTransferProjectServiceAccountResult.Email)}"),
    ///     }, new CustomResourceOptions
    ///     {
    ///         DependsOn =
    ///         {
    ///             s3_backup_bucket,
    ///         },
    ///     });
    /// 
    ///     var topic = new Gcp.PubSub.Topic("topic", new()
    ///     {
    ///         Name = pubsubTopicName,
    ///     });
    /// 
    ///     var notificationConfig = new Gcp.PubSub.TopicIAMMember("notification_config", new()
    ///     {
    ///         Topic = topic.Id,
    ///         Role = "roles/pubsub.publisher",
    ///         Member = @default.Apply(@default =&gt; $"serviceAccount:{@default.Apply(getTransferProjectServiceAccountResult =&gt; getTransferProjectServiceAccountResult.Email)}"),
    ///     });
    /// 
    ///     var s3_bucket_nightly_backup = new Gcp.Storage.TransferJob("s3-bucket-nightly-backup", new()
    ///     {
    ///         Description = "Nightly backup of S3 bucket",
    ///         Project = project,
    ///         TransferSpec = new Gcp.Storage.Inputs.TransferJobTransferSpecArgs
    ///         {
    ///             ObjectConditions = new Gcp.Storage.Inputs.TransferJobTransferSpecObjectConditionsArgs
    ///             {
    ///                 MaxTimeElapsedSinceLastModification = "600s",
    ///                 ExcludePrefixes = new[]
    ///                 {
    ///                     "requests.gz",
    ///                 },
    ///             },
    ///             TransferOptions = new Gcp.Storage.Inputs.TransferJobTransferSpecTransferOptionsArgs
    ///             {
    ///                 DeleteObjectsUniqueInSink = false,
    ///             },
    ///             AwsS3DataSource = new Gcp.Storage.Inputs.TransferJobTransferSpecAwsS3DataSourceArgs
    ///             {
    ///                 BucketName = awsS3Bucket,
    ///                 AwsAccessKey = new Gcp.Storage.Inputs.TransferJobTransferSpecAwsS3DataSourceAwsAccessKeyArgs
    ///                 {
    ///                     AccessKeyId = awsAccessKey,
    ///                     SecretAccessKey = awsSecretKey,
    ///                 },
    ///             },
    ///             GcsDataSink = new Gcp.Storage.Inputs.TransferJobTransferSpecGcsDataSinkArgs
    ///             {
    ///                 BucketName = s3_backup_bucket.Name,
    ///                 Path = "foo/bar/",
    ///             },
    ///         },
    ///         Schedule = new Gcp.Storage.Inputs.TransferJobScheduleArgs
    ///         {
    ///             ScheduleStartDate = new Gcp.Storage.Inputs.TransferJobScheduleScheduleStartDateArgs
    ///             {
    ///                 Year = 2018,
    ///                 Month = 10,
    ///                 Day = 1,
    ///             },
    ///             ScheduleEndDate = new Gcp.Storage.Inputs.TransferJobScheduleScheduleEndDateArgs
    ///             {
    ///                 Year = 2019,
    ///                 Month = 1,
    ///                 Day = 15,
    ///             },
    ///             StartTimeOfDay = new Gcp.Storage.Inputs.TransferJobScheduleStartTimeOfDayArgs
    ///             {
    ///                 Hours = 23,
    ///                 Minutes = 30,
    ///                 Seconds = 0,
    ///                 Nanos = 0,
    ///             },
    ///             RepeatInterval = "604800s",
    ///         },
    ///         NotificationConfig = new Gcp.Storage.Inputs.TransferJobNotificationConfigArgs
    ///         {
    ///             PubsubTopic = topic.Id,
    ///             EventTypes = new[]
    ///             {
    ///                 "TRANSFER_OPERATION_SUCCESS",
    ///                 "TRANSFER_OPERATION_FAILED",
    ///             },
    ///             PayloadFormat = "JSON",
    ///         },
    ///         LoggingConfig = new Gcp.Storage.Inputs.TransferJobLoggingConfigArgs
    ///         {
    ///             LogActions = new[]
    ///             {
    ///                 "COPY",
    ///                 "DELETE",
    ///             },
    ///             LogActionStates = new[]
    ///             {
    ///                 "SUCCEEDED",
    ///                 "FAILED",
    ///             },
    ///         },
    ///     }, new CustomResourceOptions
    ///     {
    ///         DependsOn =
    ///         {
    ///             s3_backup_bucketBucketIAMMember,
    ///             notificationConfig,
    ///         },
    ///     });
    /// 
    /// });
    /// ```
    /// 
    /// ## Import
    /// 
    /// Storage Transfer Jobs can be imported using the Transfer Job's `project` and `name` (without the `transferJob/` prefix), e.g.
    /// 
    /// * `{{project_id}}/{{name}}`, where `name` is a numeric value.
    /// 
    /// When using the `pulumi import` command, Storage Transfer Jobs can be imported using one of the formats above. For example:
    /// 
    /// ```sh
    /// $ pulumi import gcp:storage/transferJob:TransferJob default {{project_id}}/123456789
    /// ```
    /// </summary>
    [GcpResourceType("gcp:storage/transferJob:TransferJob")]
    public partial class TransferJob : global::Pulumi.CustomResource
    {
        /// <summary>
        /// When the Transfer Job was created.
        /// </summary>
        [Output("creationTime")]
        public Output<string> CreationTime { get; private set; } = null!;

        /// <summary>
        /// When the Transfer Job was deleted.
        /// </summary>
        [Output("deletionTime")]
        public Output<string> DeletionTime { get; private set; } = null!;

        /// <summary>
        /// Unique description to identify the Transfer Job.
        /// </summary>
        [Output("description")]
        public Output<string> Description { get; private set; } = null!;

        /// <summary>
        /// Specifies the Event-driven transfer options. Event-driven transfers listen to an event stream to transfer updated files. Structure documented below Either `EventStream` or `Schedule` must be set.
        /// </summary>
        [Output("eventStream")]
        public Output<Outputs.TransferJobEventStream?> EventStream { get; private set; } = null!;

        /// <summary>
        /// When the Transfer Job was last modified.
        /// </summary>
        [Output("lastModificationTime")]
        public Output<string> LastModificationTime { get; private set; } = null!;

        /// <summary>
        /// Logging configuration. Structure documented below.
        /// </summary>
        [Output("loggingConfig")]
        public Output<Outputs.TransferJobLoggingConfig?> LoggingConfig { get; private set; } = null!;

        /// <summary>
        /// The name of the Transfer Job. This name must start with "transferJobs/" prefix and end with a letter or a number, and should be no more than 128 characters ( `transferJobs/^(?!OPI)[A-Za-z0-9-._~]*[A-Za-z0-9]$` ). For transfers involving PosixFilesystem, this name must start with transferJobs/OPI specifically ( `transferJobs/OPI^[A-Za-z0-9-._~]*[A-Za-z0-9]$` ). For all other transfer types, this name must not start with transferJobs/OPI. Default the provider will assign a random unique name with `transferJobs/{{name}}` format, where `Name` is a numeric value.
        /// </summary>
        [Output("name")]
        public Output<string> Name { get; private set; } = null!;

        /// <summary>
        /// Notification configuration. This is not supported for transfers involving PosixFilesystem. Structure documented below.
        /// </summary>
        [Output("notificationConfig")]
        public Output<Outputs.TransferJobNotificationConfig?> NotificationConfig { get; private set; } = null!;

        /// <summary>
        /// The project in which the resource belongs. If it
        /// is not provided, the provider project is used.
        /// </summary>
        [Output("project")]
        public Output<string> Project { get; private set; } = null!;

        /// <summary>
        /// Replication specification. Structure documented below. User should not configure `Schedule`, `EventStream` with this argument. One of `TransferSpec`, or `ReplicationSpec` must be specified.
        /// 
        /// - - -
        /// </summary>
        [Output("replicationSpec")]
        public Output<Outputs.TransferJobReplicationSpec?> ReplicationSpec { get; private set; } = null!;

        /// <summary>
        /// Schedule specification defining when the Transfer Job should be scheduled to start, end and what time to run. Structure documented below. Either `Schedule` or `EventStream` must be set.
        /// </summary>
        [Output("schedule")]
        public Output<Outputs.TransferJobSchedule?> Schedule { get; private set; } = null!;

        /// <summary>
        /// The user-managed service account to run the job. If this field is specified, the given service account is granted the necessary permissions to all applicable resources (e.g. GCS buckets) required by the job.
        /// </summary>
        [Output("serviceAccount")]
        public Output<string?> ServiceAccount { get; private set; } = null!;

        /// <summary>
        /// Status of the job. Default: `ENABLED`. **NOTE: The effect of the new job status takes place during a subsequent job run. For example, if you change the job status from ENABLED to DISABLED, and an operation spawned by the transfer is running, the status change would not affect the current operation.**
        /// </summary>
        [Output("status")]
        public Output<string?> Status { get; private set; } = null!;

        /// <summary>
        /// Transfer specification. Structure documented below. One of `TransferSpec`, or `ReplicationSpec` can be specified.
        /// </summary>
        [Output("transferSpec")]
        public Output<Outputs.TransferJobTransferSpec?> TransferSpec { get; private set; } = null!;


        /// <summary>
        /// Create a TransferJob resource with the given unique name, arguments, and options.
        /// </summary>
        ///
        /// <param name="name">The unique name of the resource</param>
        /// <param name="args">The arguments used to populate this resource's properties</param>
        /// <param name="options">A bag of options that control this resource's behavior</param>
        public TransferJob(string name, TransferJobArgs args, CustomResourceOptions? options = null)
            : base("gcp:storage/transferJob:TransferJob", name, args ?? new TransferJobArgs(), MakeResourceOptions(options, ""))
        {
        }

        private TransferJob(string name, Input<string> id, TransferJobState? state = null, CustomResourceOptions? options = null)
            : base("gcp:storage/transferJob:TransferJob", name, state, MakeResourceOptions(options, id))
        {
        }

        private static CustomResourceOptions MakeResourceOptions(CustomResourceOptions? options, Input<string>? id)
        {
            var defaultOptions = new CustomResourceOptions
            {
                Version = Utilities.Version,
            };
            var merged = CustomResourceOptions.Merge(defaultOptions, options);
            // Override the ID if one was specified for consistency with other language SDKs.
            merged.Id = id ?? merged.Id;
            return merged;
        }
        /// <summary>
        /// Get an existing TransferJob resource's state with the given name, ID, and optional extra
        /// properties used to qualify the lookup.
        /// </summary>
        ///
        /// <param name="name">The unique name of the resulting resource.</param>
        /// <param name="id">The unique provider ID of the resource to lookup.</param>
        /// <param name="state">Any extra arguments used during the lookup.</param>
        /// <param name="options">A bag of options that control this resource's behavior</param>
        public static TransferJob Get(string name, Input<string> id, TransferJobState? state = null, CustomResourceOptions? options = null)
        {
            return new TransferJob(name, id, state, options);
        }
    }

    public sealed class TransferJobArgs : global::Pulumi.ResourceArgs
    {
        /// <summary>
        /// Unique description to identify the Transfer Job.
        /// </summary>
        [Input("description", required: true)]
        public Input<string> Description { get; set; } = null!;

        /// <summary>
        /// Specifies the Event-driven transfer options. Event-driven transfers listen to an event stream to transfer updated files. Structure documented below Either `EventStream` or `Schedule` must be set.
        /// </summary>
        [Input("eventStream")]
        public Input<Inputs.TransferJobEventStreamArgs>? EventStream { get; set; }

        /// <summary>
        /// Logging configuration. Structure documented below.
        /// </summary>
        [Input("loggingConfig")]
        public Input<Inputs.TransferJobLoggingConfigArgs>? LoggingConfig { get; set; }

        /// <summary>
        /// The name of the Transfer Job. This name must start with "transferJobs/" prefix and end with a letter or a number, and should be no more than 128 characters ( `transferJobs/^(?!OPI)[A-Za-z0-9-._~]*[A-Za-z0-9]$` ). For transfers involving PosixFilesystem, this name must start with transferJobs/OPI specifically ( `transferJobs/OPI^[A-Za-z0-9-._~]*[A-Za-z0-9]$` ). For all other transfer types, this name must not start with transferJobs/OPI. Default the provider will assign a random unique name with `transferJobs/{{name}}` format, where `Name` is a numeric value.
        /// </summary>
        [Input("name")]
        public Input<string>? Name { get; set; }

        /// <summary>
        /// Notification configuration. This is not supported for transfers involving PosixFilesystem. Structure documented below.
        /// </summary>
        [Input("notificationConfig")]
        public Input<Inputs.TransferJobNotificationConfigArgs>? NotificationConfig { get; set; }

        /// <summary>
        /// The project in which the resource belongs. If it
        /// is not provided, the provider project is used.
        /// </summary>
        [Input("project")]
        public Input<string>? Project { get; set; }

        /// <summary>
        /// Replication specification. Structure documented below. User should not configure `Schedule`, `EventStream` with this argument. One of `TransferSpec`, or `ReplicationSpec` must be specified.
        /// 
        /// - - -
        /// </summary>
        [Input("replicationSpec")]
        public Input<Inputs.TransferJobReplicationSpecArgs>? ReplicationSpec { get; set; }

        /// <summary>
        /// Schedule specification defining when the Transfer Job should be scheduled to start, end and what time to run. Structure documented below. Either `Schedule` or `EventStream` must be set.
        /// </summary>
        [Input("schedule")]
        public Input<Inputs.TransferJobScheduleArgs>? Schedule { get; set; }

        /// <summary>
        /// The user-managed service account to run the job. If this field is specified, the given service account is granted the necessary permissions to all applicable resources (e.g. GCS buckets) required by the job.
        /// </summary>
        [Input("serviceAccount")]
        public Input<string>? ServiceAccount { get; set; }

        /// <summary>
        /// Status of the job. Default: `ENABLED`. **NOTE: The effect of the new job status takes place during a subsequent job run. For example, if you change the job status from ENABLED to DISABLED, and an operation spawned by the transfer is running, the status change would not affect the current operation.**
        /// </summary>
        [Input("status")]
        public Input<string>? Status { get; set; }

        /// <summary>
        /// Transfer specification. Structure documented below. One of `TransferSpec`, or `ReplicationSpec` can be specified.
        /// </summary>
        [Input("transferSpec")]
        public Input<Inputs.TransferJobTransferSpecArgs>? TransferSpec { get; set; }

        public TransferJobArgs()
        {
        }
        public static new TransferJobArgs Empty => new TransferJobArgs();
    }

    public sealed class TransferJobState : global::Pulumi.ResourceArgs
    {
        /// <summary>
        /// When the Transfer Job was created.
        /// </summary>
        [Input("creationTime")]
        public Input<string>? CreationTime { get; set; }

        /// <summary>
        /// When the Transfer Job was deleted.
        /// </summary>
        [Input("deletionTime")]
        public Input<string>? DeletionTime { get; set; }

        /// <summary>
        /// Unique description to identify the Transfer Job.
        /// </summary>
        [Input("description")]
        public Input<string>? Description { get; set; }

        /// <summary>
        /// Specifies the Event-driven transfer options. Event-driven transfers listen to an event stream to transfer updated files. Structure documented below Either `EventStream` or `Schedule` must be set.
        /// </summary>
        [Input("eventStream")]
        public Input<Inputs.TransferJobEventStreamGetArgs>? EventStream { get; set; }

        /// <summary>
        /// When the Transfer Job was last modified.
        /// </summary>
        [Input("lastModificationTime")]
        public Input<string>? LastModificationTime { get; set; }

        /// <summary>
        /// Logging configuration. Structure documented below.
        /// </summary>
        [Input("loggingConfig")]
        public Input<Inputs.TransferJobLoggingConfigGetArgs>? LoggingConfig { get; set; }

        /// <summary>
        /// The name of the Transfer Job. This name must start with "transferJobs/" prefix and end with a letter or a number, and should be no more than 128 characters ( `transferJobs/^(?!OPI)[A-Za-z0-9-._~]*[A-Za-z0-9]$` ). For transfers involving PosixFilesystem, this name must start with transferJobs/OPI specifically ( `transferJobs/OPI^[A-Za-z0-9-._~]*[A-Za-z0-9]$` ). For all other transfer types, this name must not start with transferJobs/OPI. Default the provider will assign a random unique name with `transferJobs/{{name}}` format, where `Name` is a numeric value.
        /// </summary>
        [Input("name")]
        public Input<string>? Name { get; set; }

        /// <summary>
        /// Notification configuration. This is not supported for transfers involving PosixFilesystem. Structure documented below.
        /// </summary>
        [Input("notificationConfig")]
        public Input<Inputs.TransferJobNotificationConfigGetArgs>? NotificationConfig { get; set; }

        /// <summary>
        /// The project in which the resource belongs. If it
        /// is not provided, the provider project is used.
        /// </summary>
        [Input("project")]
        public Input<string>? Project { get; set; }

        /// <summary>
        /// Replication specification. Structure documented below. User should not configure `Schedule`, `EventStream` with this argument. One of `TransferSpec`, or `ReplicationSpec` must be specified.
        /// 
        /// - - -
        /// </summary>
        [Input("replicationSpec")]
        public Input<Inputs.TransferJobReplicationSpecGetArgs>? ReplicationSpec { get; set; }

        /// <summary>
        /// Schedule specification defining when the Transfer Job should be scheduled to start, end and what time to run. Structure documented below. Either `Schedule` or `EventStream` must be set.
        /// </summary>
        [Input("schedule")]
        public Input<Inputs.TransferJobScheduleGetArgs>? Schedule { get; set; }

        /// <summary>
        /// The user-managed service account to run the job. If this field is specified, the given service account is granted the necessary permissions to all applicable resources (e.g. GCS buckets) required by the job.
        /// </summary>
        [Input("serviceAccount")]
        public Input<string>? ServiceAccount { get; set; }

        /// <summary>
        /// Status of the job. Default: `ENABLED`. **NOTE: The effect of the new job status takes place during a subsequent job run. For example, if you change the job status from ENABLED to DISABLED, and an operation spawned by the transfer is running, the status change would not affect the current operation.**
        /// </summary>
        [Input("status")]
        public Input<string>? Status { get; set; }

        /// <summary>
        /// Transfer specification. Structure documented below. One of `TransferSpec`, or `ReplicationSpec` can be specified.
        /// </summary>
        [Input("transferSpec")]
        public Input<Inputs.TransferJobTransferSpecGetArgs>? TransferSpec { get; set; }

        public TransferJobState()
        {
        }
        public static new TransferJobState Empty => new TransferJobState();
    }
}
