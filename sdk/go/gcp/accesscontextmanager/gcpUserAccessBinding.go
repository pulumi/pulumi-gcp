// Code generated by the Pulumi Terraform Bridge (tfgen) Tool DO NOT EDIT.
// *** WARNING: Do not edit by hand unless you're certain you know what you are doing! ***

package accesscontextmanager

import (
	"context"
	"reflect"

	"errors"
	"github.com/pulumi/pulumi-gcp/sdk/v8/go/gcp/internal"
	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
)

// Restricts access to Cloud Console and Google Cloud APIs for a set of users using Context-Aware Access.
//
// To get more information about GcpUserAccessBinding, see:
//
// * [API documentation](https://cloud.google.com/access-context-manager/docs/reference/rest/v1/organizations.gcpUserAccessBindings)
//
// ## Example Usage
//
// ### Access Context Manager Gcp User Access Binding Basic
//
// ```go
// package main
//
// import (
//
//	"fmt"
//
//	"github.com/pulumi/pulumi-gcp/sdk/v8/go/gcp/accesscontextmanager"
//	"github.com/pulumi/pulumi-gcp/sdk/v8/go/gcp/cloudidentity"
//	"github.com/pulumi/pulumi-std/sdk/go/std"
//	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
//
// )
//
//	func main() {
//		pulumi.Run(func(ctx *pulumi.Context) error {
//			group, err := cloudidentity.NewGroup(ctx, "group", &cloudidentity.GroupArgs{
//				DisplayName: pulumi.String("my-identity-group"),
//				Parent:      pulumi.String("customers/A01b123xz"),
//				GroupKey: &cloudidentity.GroupGroupKeyArgs{
//					Id: pulumi.String("my-identity-group@example.com"),
//				},
//				Labels: pulumi.StringMap{
//					"cloudidentity.googleapis.com/groups.discussion_forum": pulumi.String(""),
//				},
//			})
//			if err != nil {
//				return err
//			}
//			access_policy, err := accesscontextmanager.NewAccessPolicy(ctx, "access-policy", &accesscontextmanager.AccessPolicyArgs{
//				Parent: pulumi.String("organizations/123456789"),
//				Title:  pulumi.String("my policy"),
//			})
//			if err != nil {
//				return err
//			}
//			accessLevelIdForUserAccessBinding, err := accesscontextmanager.NewAccessLevel(ctx, "access_level_id_for_user_access_binding", &accesscontextmanager.AccessLevelArgs{
//				Parent: access_policy.Name.ApplyT(func(name string) (string, error) {
//					return fmt.Sprintf("accessPolicies/%v", name), nil
//				}).(pulumi.StringOutput),
//				Name: access_policy.Name.ApplyT(func(name string) (string, error) {
//					return fmt.Sprintf("accessPolicies/%v/accessLevels/chromeos_no_lock", name), nil
//				}).(pulumi.StringOutput),
//				Title: pulumi.String("chromeos_no_lock"),
//				Basic: &accesscontextmanager.AccessLevelBasicArgs{
//					Conditions: accesscontextmanager.AccessLevelBasicConditionArray{
//						&accesscontextmanager.AccessLevelBasicConditionArgs{
//							DevicePolicy: &accesscontextmanager.AccessLevelBasicConditionDevicePolicyArgs{
//								RequireScreenLock: pulumi.Bool(true),
//								OsConstraints: accesscontextmanager.AccessLevelBasicConditionDevicePolicyOsConstraintArray{
//									&accesscontextmanager.AccessLevelBasicConditionDevicePolicyOsConstraintArgs{
//										OsType: pulumi.String("DESKTOP_CHROME_OS"),
//									},
//								},
//							},
//							Regions: pulumi.StringArray{
//								pulumi.String("US"),
//							},
//						},
//					},
//				},
//			})
//			if err != nil {
//				return err
//			}
//			_, err = accesscontextmanager.NewGcpUserAccessBinding(ctx, "gcp_user_access_binding", &accesscontextmanager.GcpUserAccessBindingArgs{
//				OrganizationId: pulumi.String("123456789"),
//				GroupKey: pulumi.String(std.TrimprefixOutput(ctx, std.TrimprefixOutputArgs{
//					Input:  group.ID(),
//					Prefix: pulumi.String("groups/"),
//				}, nil).ApplyT(func(invoke std.TrimprefixResult) (*string, error) {
//					return invoke.Result, nil
//				}).(pulumi.StringPtrOutput)),
//				AccessLevels: accessLevelIdForUserAccessBinding.Name,
//			})
//			if err != nil {
//				return err
//			}
//			return nil
//		})
//	}
//
// ```
//
// ## Import
//
// GcpUserAccessBinding can be imported using any of these accepted formats:
//
// * `{{name}}`
//
// When using the `pulumi import` command, GcpUserAccessBinding can be imported using one of the formats above. For example:
//
// ```sh
// $ pulumi import gcp:accesscontextmanager/gcpUserAccessBinding:GcpUserAccessBinding default {{name}}
// ```
type GcpUserAccessBinding struct {
	pulumi.CustomResourceState

	// Optional. Access level that a user must have to be granted access. Only one access level is supported, not multiple. This repeated field must have exactly one element. Example: "accessPolicies/9522/accessLevels/device_trusted"
	AccessLevels pulumi.StringPtrOutput `pulumi:"accessLevels"`
	// Required. Immutable. Google Group id whose members are subject to this binding's restrictions. See "id" in the G Suite Directory API's Groups resource. If a group's email address/alias is changed, this resource will continue to point at the changed group. This field does not accept group email addresses or aliases. Example: "01d520gv4vjcrht"
	GroupKey pulumi.StringOutput `pulumi:"groupKey"`
	// Immutable. Assigned by the server during creation. The last segment has an arbitrary length and has only URI unreserved characters (as defined by RFC 3986 Section 2.3). Should not be specified by the client during creation. Example: "organizations/256/gcpUserAccessBindings/b3-BhcX_Ud5N"
	Name pulumi.StringOutput `pulumi:"name"`
	// Required. ID of the parent organization.
	//
	// ***
	OrganizationId pulumi.StringOutput `pulumi:"organizationId"`
	// Optional. A list of scoped access settings that set this binding's restrictions on a subset of applications.
	// Structure is documented below.
	ScopedAccessSettings GcpUserAccessBindingScopedAccessSettingArrayOutput `pulumi:"scopedAccessSettings"`
	// Optional. The Google Cloud session length (GCSL) policy for the group key.
	// Structure is documented below.
	SessionSettings GcpUserAccessBindingSessionSettingsPtrOutput `pulumi:"sessionSettings"`
}

// NewGcpUserAccessBinding registers a new resource with the given unique name, arguments, and options.
func NewGcpUserAccessBinding(ctx *pulumi.Context,
	name string, args *GcpUserAccessBindingArgs, opts ...pulumi.ResourceOption) (*GcpUserAccessBinding, error) {
	if args == nil {
		return nil, errors.New("missing one or more required arguments")
	}

	if args.GroupKey == nil {
		return nil, errors.New("invalid value for required argument 'GroupKey'")
	}
	if args.OrganizationId == nil {
		return nil, errors.New("invalid value for required argument 'OrganizationId'")
	}
	opts = internal.PkgResourceDefaultOpts(opts)
	var resource GcpUserAccessBinding
	err := ctx.RegisterResource("gcp:accesscontextmanager/gcpUserAccessBinding:GcpUserAccessBinding", name, args, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// GetGcpUserAccessBinding gets an existing GcpUserAccessBinding resource's state with the given name, ID, and optional
// state properties that are used to uniquely qualify the lookup (nil if not required).
func GetGcpUserAccessBinding(ctx *pulumi.Context,
	name string, id pulumi.IDInput, state *GcpUserAccessBindingState, opts ...pulumi.ResourceOption) (*GcpUserAccessBinding, error) {
	var resource GcpUserAccessBinding
	err := ctx.ReadResource("gcp:accesscontextmanager/gcpUserAccessBinding:GcpUserAccessBinding", name, id, state, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// Input properties used for looking up and filtering GcpUserAccessBinding resources.
type gcpUserAccessBindingState struct {
	// Optional. Access level that a user must have to be granted access. Only one access level is supported, not multiple. This repeated field must have exactly one element. Example: "accessPolicies/9522/accessLevels/device_trusted"
	AccessLevels *string `pulumi:"accessLevels"`
	// Required. Immutable. Google Group id whose members are subject to this binding's restrictions. See "id" in the G Suite Directory API's Groups resource. If a group's email address/alias is changed, this resource will continue to point at the changed group. This field does not accept group email addresses or aliases. Example: "01d520gv4vjcrht"
	GroupKey *string `pulumi:"groupKey"`
	// Immutable. Assigned by the server during creation. The last segment has an arbitrary length and has only URI unreserved characters (as defined by RFC 3986 Section 2.3). Should not be specified by the client during creation. Example: "organizations/256/gcpUserAccessBindings/b3-BhcX_Ud5N"
	Name *string `pulumi:"name"`
	// Required. ID of the parent organization.
	//
	// ***
	OrganizationId *string `pulumi:"organizationId"`
	// Optional. A list of scoped access settings that set this binding's restrictions on a subset of applications.
	// Structure is documented below.
	ScopedAccessSettings []GcpUserAccessBindingScopedAccessSetting `pulumi:"scopedAccessSettings"`
	// Optional. The Google Cloud session length (GCSL) policy for the group key.
	// Structure is documented below.
	SessionSettings *GcpUserAccessBindingSessionSettings `pulumi:"sessionSettings"`
}

type GcpUserAccessBindingState struct {
	// Optional. Access level that a user must have to be granted access. Only one access level is supported, not multiple. This repeated field must have exactly one element. Example: "accessPolicies/9522/accessLevels/device_trusted"
	AccessLevels pulumi.StringPtrInput
	// Required. Immutable. Google Group id whose members are subject to this binding's restrictions. See "id" in the G Suite Directory API's Groups resource. If a group's email address/alias is changed, this resource will continue to point at the changed group. This field does not accept group email addresses or aliases. Example: "01d520gv4vjcrht"
	GroupKey pulumi.StringPtrInput
	// Immutable. Assigned by the server during creation. The last segment has an arbitrary length and has only URI unreserved characters (as defined by RFC 3986 Section 2.3). Should not be specified by the client during creation. Example: "organizations/256/gcpUserAccessBindings/b3-BhcX_Ud5N"
	Name pulumi.StringPtrInput
	// Required. ID of the parent organization.
	//
	// ***
	OrganizationId pulumi.StringPtrInput
	// Optional. A list of scoped access settings that set this binding's restrictions on a subset of applications.
	// Structure is documented below.
	ScopedAccessSettings GcpUserAccessBindingScopedAccessSettingArrayInput
	// Optional. The Google Cloud session length (GCSL) policy for the group key.
	// Structure is documented below.
	SessionSettings GcpUserAccessBindingSessionSettingsPtrInput
}

func (GcpUserAccessBindingState) ElementType() reflect.Type {
	return reflect.TypeOf((*gcpUserAccessBindingState)(nil)).Elem()
}

type gcpUserAccessBindingArgs struct {
	// Optional. Access level that a user must have to be granted access. Only one access level is supported, not multiple. This repeated field must have exactly one element. Example: "accessPolicies/9522/accessLevels/device_trusted"
	AccessLevels *string `pulumi:"accessLevels"`
	// Required. Immutable. Google Group id whose members are subject to this binding's restrictions. See "id" in the G Suite Directory API's Groups resource. If a group's email address/alias is changed, this resource will continue to point at the changed group. This field does not accept group email addresses or aliases. Example: "01d520gv4vjcrht"
	GroupKey string `pulumi:"groupKey"`
	// Required. ID of the parent organization.
	//
	// ***
	OrganizationId string `pulumi:"organizationId"`
	// Optional. A list of scoped access settings that set this binding's restrictions on a subset of applications.
	// Structure is documented below.
	ScopedAccessSettings []GcpUserAccessBindingScopedAccessSetting `pulumi:"scopedAccessSettings"`
	// Optional. The Google Cloud session length (GCSL) policy for the group key.
	// Structure is documented below.
	SessionSettings *GcpUserAccessBindingSessionSettings `pulumi:"sessionSettings"`
}

// The set of arguments for constructing a GcpUserAccessBinding resource.
type GcpUserAccessBindingArgs struct {
	// Optional. Access level that a user must have to be granted access. Only one access level is supported, not multiple. This repeated field must have exactly one element. Example: "accessPolicies/9522/accessLevels/device_trusted"
	AccessLevels pulumi.StringPtrInput
	// Required. Immutable. Google Group id whose members are subject to this binding's restrictions. See "id" in the G Suite Directory API's Groups resource. If a group's email address/alias is changed, this resource will continue to point at the changed group. This field does not accept group email addresses or aliases. Example: "01d520gv4vjcrht"
	GroupKey pulumi.StringInput
	// Required. ID of the parent organization.
	//
	// ***
	OrganizationId pulumi.StringInput
	// Optional. A list of scoped access settings that set this binding's restrictions on a subset of applications.
	// Structure is documented below.
	ScopedAccessSettings GcpUserAccessBindingScopedAccessSettingArrayInput
	// Optional. The Google Cloud session length (GCSL) policy for the group key.
	// Structure is documented below.
	SessionSettings GcpUserAccessBindingSessionSettingsPtrInput
}

func (GcpUserAccessBindingArgs) ElementType() reflect.Type {
	return reflect.TypeOf((*gcpUserAccessBindingArgs)(nil)).Elem()
}

type GcpUserAccessBindingInput interface {
	pulumi.Input

	ToGcpUserAccessBindingOutput() GcpUserAccessBindingOutput
	ToGcpUserAccessBindingOutputWithContext(ctx context.Context) GcpUserAccessBindingOutput
}

func (*GcpUserAccessBinding) ElementType() reflect.Type {
	return reflect.TypeOf((**GcpUserAccessBinding)(nil)).Elem()
}

func (i *GcpUserAccessBinding) ToGcpUserAccessBindingOutput() GcpUserAccessBindingOutput {
	return i.ToGcpUserAccessBindingOutputWithContext(context.Background())
}

func (i *GcpUserAccessBinding) ToGcpUserAccessBindingOutputWithContext(ctx context.Context) GcpUserAccessBindingOutput {
	return pulumi.ToOutputWithContext(ctx, i).(GcpUserAccessBindingOutput)
}

// GcpUserAccessBindingArrayInput is an input type that accepts GcpUserAccessBindingArray and GcpUserAccessBindingArrayOutput values.
// You can construct a concrete instance of `GcpUserAccessBindingArrayInput` via:
//
//	GcpUserAccessBindingArray{ GcpUserAccessBindingArgs{...} }
type GcpUserAccessBindingArrayInput interface {
	pulumi.Input

	ToGcpUserAccessBindingArrayOutput() GcpUserAccessBindingArrayOutput
	ToGcpUserAccessBindingArrayOutputWithContext(context.Context) GcpUserAccessBindingArrayOutput
}

type GcpUserAccessBindingArray []GcpUserAccessBindingInput

func (GcpUserAccessBindingArray) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*GcpUserAccessBinding)(nil)).Elem()
}

func (i GcpUserAccessBindingArray) ToGcpUserAccessBindingArrayOutput() GcpUserAccessBindingArrayOutput {
	return i.ToGcpUserAccessBindingArrayOutputWithContext(context.Background())
}

func (i GcpUserAccessBindingArray) ToGcpUserAccessBindingArrayOutputWithContext(ctx context.Context) GcpUserAccessBindingArrayOutput {
	return pulumi.ToOutputWithContext(ctx, i).(GcpUserAccessBindingArrayOutput)
}

// GcpUserAccessBindingMapInput is an input type that accepts GcpUserAccessBindingMap and GcpUserAccessBindingMapOutput values.
// You can construct a concrete instance of `GcpUserAccessBindingMapInput` via:
//
//	GcpUserAccessBindingMap{ "key": GcpUserAccessBindingArgs{...} }
type GcpUserAccessBindingMapInput interface {
	pulumi.Input

	ToGcpUserAccessBindingMapOutput() GcpUserAccessBindingMapOutput
	ToGcpUserAccessBindingMapOutputWithContext(context.Context) GcpUserAccessBindingMapOutput
}

type GcpUserAccessBindingMap map[string]GcpUserAccessBindingInput

func (GcpUserAccessBindingMap) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*GcpUserAccessBinding)(nil)).Elem()
}

func (i GcpUserAccessBindingMap) ToGcpUserAccessBindingMapOutput() GcpUserAccessBindingMapOutput {
	return i.ToGcpUserAccessBindingMapOutputWithContext(context.Background())
}

func (i GcpUserAccessBindingMap) ToGcpUserAccessBindingMapOutputWithContext(ctx context.Context) GcpUserAccessBindingMapOutput {
	return pulumi.ToOutputWithContext(ctx, i).(GcpUserAccessBindingMapOutput)
}

type GcpUserAccessBindingOutput struct{ *pulumi.OutputState }

func (GcpUserAccessBindingOutput) ElementType() reflect.Type {
	return reflect.TypeOf((**GcpUserAccessBinding)(nil)).Elem()
}

func (o GcpUserAccessBindingOutput) ToGcpUserAccessBindingOutput() GcpUserAccessBindingOutput {
	return o
}

func (o GcpUserAccessBindingOutput) ToGcpUserAccessBindingOutputWithContext(ctx context.Context) GcpUserAccessBindingOutput {
	return o
}

// Optional. Access level that a user must have to be granted access. Only one access level is supported, not multiple. This repeated field must have exactly one element. Example: "accessPolicies/9522/accessLevels/device_trusted"
func (o GcpUserAccessBindingOutput) AccessLevels() pulumi.StringPtrOutput {
	return o.ApplyT(func(v *GcpUserAccessBinding) pulumi.StringPtrOutput { return v.AccessLevels }).(pulumi.StringPtrOutput)
}

// Required. Immutable. Google Group id whose members are subject to this binding's restrictions. See "id" in the G Suite Directory API's Groups resource. If a group's email address/alias is changed, this resource will continue to point at the changed group. This field does not accept group email addresses or aliases. Example: "01d520gv4vjcrht"
func (o GcpUserAccessBindingOutput) GroupKey() pulumi.StringOutput {
	return o.ApplyT(func(v *GcpUserAccessBinding) pulumi.StringOutput { return v.GroupKey }).(pulumi.StringOutput)
}

// Immutable. Assigned by the server during creation. The last segment has an arbitrary length and has only URI unreserved characters (as defined by RFC 3986 Section 2.3). Should not be specified by the client during creation. Example: "organizations/256/gcpUserAccessBindings/b3-BhcX_Ud5N"
func (o GcpUserAccessBindingOutput) Name() pulumi.StringOutput {
	return o.ApplyT(func(v *GcpUserAccessBinding) pulumi.StringOutput { return v.Name }).(pulumi.StringOutput)
}

// Required. ID of the parent organization.
//
// ***
func (o GcpUserAccessBindingOutput) OrganizationId() pulumi.StringOutput {
	return o.ApplyT(func(v *GcpUserAccessBinding) pulumi.StringOutput { return v.OrganizationId }).(pulumi.StringOutput)
}

// Optional. A list of scoped access settings that set this binding's restrictions on a subset of applications.
// Structure is documented below.
func (o GcpUserAccessBindingOutput) ScopedAccessSettings() GcpUserAccessBindingScopedAccessSettingArrayOutput {
	return o.ApplyT(func(v *GcpUserAccessBinding) GcpUserAccessBindingScopedAccessSettingArrayOutput {
		return v.ScopedAccessSettings
	}).(GcpUserAccessBindingScopedAccessSettingArrayOutput)
}

// Optional. The Google Cloud session length (GCSL) policy for the group key.
// Structure is documented below.
func (o GcpUserAccessBindingOutput) SessionSettings() GcpUserAccessBindingSessionSettingsPtrOutput {
	return o.ApplyT(func(v *GcpUserAccessBinding) GcpUserAccessBindingSessionSettingsPtrOutput { return v.SessionSettings }).(GcpUserAccessBindingSessionSettingsPtrOutput)
}

type GcpUserAccessBindingArrayOutput struct{ *pulumi.OutputState }

func (GcpUserAccessBindingArrayOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*GcpUserAccessBinding)(nil)).Elem()
}

func (o GcpUserAccessBindingArrayOutput) ToGcpUserAccessBindingArrayOutput() GcpUserAccessBindingArrayOutput {
	return o
}

func (o GcpUserAccessBindingArrayOutput) ToGcpUserAccessBindingArrayOutputWithContext(ctx context.Context) GcpUserAccessBindingArrayOutput {
	return o
}

func (o GcpUserAccessBindingArrayOutput) Index(i pulumi.IntInput) GcpUserAccessBindingOutput {
	return pulumi.All(o, i).ApplyT(func(vs []interface{}) *GcpUserAccessBinding {
		return vs[0].([]*GcpUserAccessBinding)[vs[1].(int)]
	}).(GcpUserAccessBindingOutput)
}

type GcpUserAccessBindingMapOutput struct{ *pulumi.OutputState }

func (GcpUserAccessBindingMapOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*GcpUserAccessBinding)(nil)).Elem()
}

func (o GcpUserAccessBindingMapOutput) ToGcpUserAccessBindingMapOutput() GcpUserAccessBindingMapOutput {
	return o
}

func (o GcpUserAccessBindingMapOutput) ToGcpUserAccessBindingMapOutputWithContext(ctx context.Context) GcpUserAccessBindingMapOutput {
	return o
}

func (o GcpUserAccessBindingMapOutput) MapIndex(k pulumi.StringInput) GcpUserAccessBindingOutput {
	return pulumi.All(o, k).ApplyT(func(vs []interface{}) *GcpUserAccessBinding {
		return vs[0].(map[string]*GcpUserAccessBinding)[vs[1].(string)]
	}).(GcpUserAccessBindingOutput)
}

func init() {
	pulumi.RegisterInputType(reflect.TypeOf((*GcpUserAccessBindingInput)(nil)).Elem(), &GcpUserAccessBinding{})
	pulumi.RegisterInputType(reflect.TypeOf((*GcpUserAccessBindingArrayInput)(nil)).Elem(), GcpUserAccessBindingArray{})
	pulumi.RegisterInputType(reflect.TypeOf((*GcpUserAccessBindingMapInput)(nil)).Elem(), GcpUserAccessBindingMap{})
	pulumi.RegisterOutputType(GcpUserAccessBindingOutput{})
	pulumi.RegisterOutputType(GcpUserAccessBindingArrayOutput{})
	pulumi.RegisterOutputType(GcpUserAccessBindingMapOutput{})
}
